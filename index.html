
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>王志刚</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="wzg">
    

    
    <meta name="description" content="一个两年经验的菜鸟">
<meta property="og:type" content="website">
<meta property="og:title" content="王志刚">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="王志刚">
<meta property="og:description" content="一个两年经验的菜鸟">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="王志刚">
<meta name="twitter:description" content="一个两年经验的菜鸟">

    
    <link rel="alternative" href="/atom.xml" title="王志刚" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="王志刚" title="王志刚"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="王志刚">王志刚</a></h1>
				<h2 class="blog-motto">疑似码农</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/16/php-9-mysql-basic-knowledge/" title="php学习笔记9-mysql基础知识2:校对集,数据类型" itemprop="url">php学习笔记9-mysql基础知识2:校对集,数据类型</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-16T02:18:13.000Z" itemprop="datePublished"> 发表于 2015-05-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="校对集">校对集</h2><p>A  =======&gt;  01000001 =======&gt;  65<br>a  =======&gt;  01100001 ========&gt; 97</p>
<p>校对集有三种比较方式</p>
<ul>
<li>_bin：使用二进制进行比较（区分大小写）</li>
<li>_ci：（case insensitive），大小写不敏感，不区分大小写（将某个字符转变成另外一个字符对应的大小写，从而再进行数值的比较）</li>
<li>_cs：（case sensitive），大小写敏感，区分大小写</li>
</ul>
<p>比较大小：order by 字段 [asc|desc]，对字段进行排序，asc表示升序（默认的），desc表示降序</p>
<p>默认的，不论是gbk还是utf8是不区分大小写<br>utf8不支持中文比较，gbk支持（拼音比较）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_case(</span><br><span class="line"><span class="string">`character`</span> <span class="built_in">varchar</span>(<span class="number">1</span>)</span><br><span class="line">)<span class="keyword">charset</span> utf8 <span class="keyword">collate</span> utf8_bin;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_case1(</span><br><span class="line"><span class="string">`character`</span> <span class="built_in">varchar</span>(<span class="number">1</span>)</span><br><span class="line">)<span class="keyword">charset</span> utf8 <span class="keyword">collate</span> utf8_general_ci;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_case <span class="keyword">values</span>(<span class="string">'a'</span>),(<span class="string">'A'</span>),(<span class="string">'b'</span>),(<span class="string">'B'</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_case1 <span class="keyword">values</span>(<span class="string">'a'</span>),(<span class="string">'A'</span>),(<span class="string">'b'</span>),(<span class="string">'B'</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_case <span class="keyword">values</span>(<span class="string">'b'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 升序查看数据</span></span><br><span class="line"><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> test_case <span class="keyword">order</span> <span class="keyword">by</span> <span class="string">`character`</span> <span class="keyword">asc</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">select</span> * <span class="keyword">from</span> test_case <span class="keyword">order</span> <span class="keyword">by</span> <span class="string">`character`</span> <span class="keyword">desc</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看校对集</span></span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">collation</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改默认的校对集</span></span><br><span class="line"><span class="operator"><span class="keyword">alter</span> <span class="keyword">database</span> mydatabase <span class="keyword">charset</span> utf8 <span class="keyword">collate</span> utf8_bin;</span></span><br><span class="line"><span class="operator"><span class="keyword">alter</span> <span class="keyword">database</span> mydatabase <span class="keyword">charset</span> utf8 <span class="keyword">collate</span> utf8_general_ci;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改表的校对集</span></span><br><span class="line"><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> test_case <span class="keyword">collate</span> utf8_bin;</span></span><br><span class="line"><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> test_case <span class="keyword">collate</span> utf8_general_ci;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">delete</span> <span class="keyword">from</span> test_case;</span></span><br></pre></td></tr></table></figure>
<h2 id="乱码问题">乱码问题</h2><p>乱码的原因：某一端不能正常的解析另一端提供的数据（理解的目标数据的字符集有误）</p>
<p>web包含三个部分：浏览器显示，数据库存储，PHP文件<br>浏览器显示：默认是gbk<br>数据库存储：默认是utf8<br>PHP文件：utf-8</p>
<p>防止乱码原理<br>理想状态下，我们希望浏览器，PHP脚本和数据库字符集三码合一，都使用一种字符集来实现。<br><img src="/image/php_learn/mysql4.jpg" alt=""></p>
<h2 id="mysql存储引擎">mysql存储引擎</h2><p>存储引擎：处理和保存数据的方式。主要存储引擎是InnoDB和Myisam<br>InnoDB：会创建一个结构文件，数据和索引都放在ibdata1文件里<br>Myisam：创建三个文件，结构，索引和数据</p>
<p>mysql存储引擎<br>引擎因为费用的问题分为两类<br>免费：InnoDB和Myisam都是免费<br>收费：BDB，memory，archive都是收费<br><img src="/image/php_learn/mysql5.jpg" alt=""></p>
<p>Myisam与InnoDB的区别</p>
<ol>
<li>Myisam在插入数据和查询数据的时候都比InnoDB效率高</li>
<li>InnoDB在更新和删除的时候比Myisam效率高</li>
<li>InnoDB支持事务安全，Myisam不支持</li>
</ol>
<p>如何选择存储引擎？</p>
<ol>
<li>基本可以使用数据库默认的存储引擎（InnoDB）</li>
<li>如果在需要事务处理的时候，只能选择InnoDB</li>
<li>数据本身以插入和查询为主，那么可以使用Myisam</li>
</ol>
<p>SQL语言是一种强类型语言，在为数据进行定义的时候，必须要指定数据类型。</p>
<h2 id="数据类型">数据类型</h2><p>mysql中也分为三大数据类型：数值型，字符型，时间日期型<br><img src="/image/php_learn/mysql6.jpg" alt=""></p>
<h3 id="数值型">数值型</h3><p>数值型分为整数型和小数型（包含小数部分的数据类型）</p>
<h4 id="整型">整型</h4><p>mysql中光整数型数据类型就有五种：tinyint，smallint，mediumint，int，bigint<br>tinyint：迷你整型，占用1个字节保存数据，能够表示256个数值<br>smallint：小整型，占用2个字节保存数据，能够表示65536个数值<br>mediumint：中整型，占用3个字节保存数据<br>int：标准整型，占用4个字节保存数据，42亿多<br>bigint：大整型，占用8个字节保存数据<br><img src="/image/php_learn/mysql7.jpg" alt=""></p>
<p>为什么要有这么多整型？</p>
<ol>
<li>能够最大效率的使用磁盘空间，做到最少浪费。根据实际业务分配内存空间来进行数据保存。</li>
<li>查询的效率变高。</li>
</ol>
<p>如何在项目中选择使用何种整型？<br>根据业务需求，某一类数据的边界值，看边界值落在那个整型的范围，就是用最小的那个。<br>在实际操作中tinyint，int使用的较多</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- int类型测试</span></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_int(</span><br><span class="line"><span class="string">`tinyint`</span> tinyint,</span><br><span class="line"><span class="string">`smallint`</span> <span class="built_in">smallint</span>,</span><br><span class="line"><span class="string">`mediumint`</span> mediumint,</span><br><span class="line"><span class="string">`int`</span> <span class="built_in">int</span>,</span><br><span class="line"><span class="string">`bigint`</span> <span class="built_in">bigint</span></span><br><span class="line">)<span class="keyword">charset</span> utf8;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_int <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span> <span class="comment">-- 没有问题</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_int <span class="keyword">values</span>(<span class="number">256</span>,<span class="number">256</span>,<span class="number">256</span>,<span class="number">256</span>,<span class="number">256</span>);</span> <span class="comment">-- 不能插入，tinyint超出范围</span></span><br></pre></td></tr></table></figure>
<p>无符号：表示数值只能是正的，不能有负数<br>语法：在字段类型后面使用unsigned进行标识<br>age tinyint unsigned;//年龄是一个迷你整型，无符号表示（0-255）<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_int <span class="keyword">values</span>(-<span class="number">100</span>,-<span class="number">200</span>,-<span class="number">300</span>,-<span class="number">400</span>,-<span class="number">500</span>);</span> <span class="comment">-- 正常，默认是有符号</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加无符号字段类型</span></span><br><span class="line"><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> test_int <span class="keyword">add</span> age tinyint unsigned;</span> <span class="comment">-- 无符号的迷你整型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更新表字段数据</span></span><br><span class="line"><span class="operator"><span class="keyword">update</span> test_int <span class="keyword">set</span> age = -<span class="number">1</span>;</span><span class="comment">-- 错误，因为age是无符号，只能从0开始</span></span><br><span class="line"><span class="operator"><span class="keyword">update</span> test_int <span class="keyword">set</span> age = <span class="number">250</span>;</span><span class="comment">-- 正确</span></span><br></pre></td></tr></table></figure></p>
<p>显示宽度：占的位数，当某个数值没有达到显示宽度的时候，在数值的左边使用0来补足显示宽度（不能改变数值本身大小）<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; desc test_int;</span><br><span class="line">+-----------+---------------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field     | Type                | Null | Key | Default | Extra |</span><br><span class="line">+-----------+---------------------+------+-----+---------+-------+</span></span><br><span class="line">| tinyint   | tinyint(4)          | YES  |     | NULL    |       |</span><br><span class="line">| smallint  | smallint(6)         | YES  |     | NULL    |       |</span><br><span class="line">| mediumint | mediumint(9)        | YES  |     | NULL    |       |</span><br><span class="line">| int       | int(11)             | YES  |     | NULL    |       |</span><br><span class="line">| bigint    | bigint(20)          | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| age       | tinyint(3) unsigned | YES  |     | NULL    |       |</span><br><span class="line">+-----------+---------------------+------+-----+---------+-------+</span></span><br><span class="line">6 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure></p>
<p>默认的，系统不会进行0填充，需要给字段显示的增加一个属性：zerofill，0填充<br>系统默认显示的宽度是数据类型能够显示的最大宽度。<br>0填充有一个特点：使用0填充的字段必须为无符号类型，不能为负数进行0填充</p>
<p>0填充是专门用来配合显示宽度：显示宽度只是在数据的值没有达到指定宽度的时候使用0填充，0填充或者显示宽度都不会限制原来值的大小，值的大小由数据类型决定。</p>
<p>什么地方会使用显示宽度？<br>在一些需要使用0填充地方不改变原来值的大小，却能够用宽度来固定显示数据，保证前端数据的显示不会改变原来的css结构。比如说月份，日期，时间。<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update test<span class="emphasis">_int set `tinyint` = 100 where `tinyint` = -100;</span><br><span class="line">Query OK, 1 row affected (0.11 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span>mysql&gt; alter table test<span class="emphasis">_int modify `tinyint` tinyint(2) zerofill;</span><br><span class="line">Query OK, 2 rows affected (0.74 sec)</span><br><span class="line">Records: 2  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"></span><span class="header">mysql&gt; select * from test_int;</span><br><span class="line">+---------+----------+-----------+------+--------+------+</span></span><br><span class="line"><span class="header">| tinyint | smallint | mediumint | int  | bigint | age  |</span><br><span class="line">+---------+----------+-----------+------+--------+------+</span></span><br><span class="line">|      01 |        2 |         3 |    4 |      5 |  250 |</span><br><span class="line"><span class="header">|     100 |     -200 |      -300 | -400 |   -500 |  250 |</span><br><span class="line">+---------+----------+-----------+------+--------+------+</span></span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<h4 id="小数型">小数型</h4><p>带有小数部分的数据。<br>mysql中小数型分为两种：浮点型，定点型<br>浮点型：float和double<br>float：采用4个字节保存数据<br>double：采用八个字节保存数据<br><img src="/image/php_learn/mysql8.jpg" alt=""><br>浮点数的存储使用4个字节32位存储，第一位叫做符号位，会使用符号位后面的8位用来存储街码（底数+指数），其他的用来表示数据。<br>浮点数会丢失精度<br>float：最大有效位7位左右<br>double：最大有效位为15位左右</p>
<p>浮点数的使用方式<br>float(M,D)：M表示整个长度，D表示小数位的长度</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-- </span>浮点数</span><br><span class="line">create table test<span class="emphasis">_float(</span><br><span class="line">`float` float,</span><br><span class="line">`double` double(20,2) -- 整个有效十进制长度为20，其中整数部分为18，小数部分占2</span><br><span class="line">)charset utf8;</span><br><span class="line"></span><br><span class="line"></span>insert into test<span class="emphasis">_float values(123456789.12345678,12345678901234567890.213456789);</span><br><span class="line">-- 第二个浮点数已经超出了指定的长度，整数部分有20个长度</span><br><span class="line"></span><br><span class="line"></span>insert into test<span class="emphasis">_float values(23456789.23456789,12345678903456.23456);</span><br><span class="line">-- 小数部分虽然超出了指定的长度，但是系统会进行四舍五入，自动保留两位</span><br><span class="line"></span><br><span class="line"></span><span class="header">mysql&gt; select * from test_float;</span><br><span class="line">+----------+-------------------+</span></span><br><span class="line"><span class="header">| float    | double            |</span><br><span class="line">+----------+-------------------+</span></span><br><span class="line"><span class="header">| 23456800 | 12345678903456.23 |</span><br><span class="line">+----------+-------------------+</span></span><br><span class="line">1 row in set (0.08 sec)</span><br></pre></td></tr></table></figure>
<p>浮点数只适用于那些对于数值精确要求不高，但是数量特别大的数据。<br>凡是跟钱相关绝对不用浮点数。</p>
<p> 1.7 ======》二进制00000001.1011001<br> 0.7 <em> 2 = 1.4        1<br> 0.4 </em> 2 = 0.8        0<br> 0.8 <em> 2 = 1.6        1<br> 0.6 </em> 2 = 1.2        1</p>
<p> 定点型：decimal<br> 定点型的数据范围<br> <img src="/image/php_learn/mysql9.jpg" alt=""></p>
<p> 能够自动的扩展宽度来保存数据，保证数据的精度，基于小数部分，如果超出指定长度，仍然会进行四舍五入。<br> 语法：decimal(M,D)：M表示总长度，D表示小数部分的长度<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_decimal(</span><br><span class="line"><span class="string">`decimal`</span> <span class="built_in">decimal</span>(<span class="number">10</span>,<span class="number">2</span>), <span class="comment">-- 表示整数最长为10，小数部分为2</span></span><br><span class="line"><span class="string">`float`</span> <span class="built_in">float</span>(<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line">)<span class="keyword">charset</span> utf8;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_decimal <span class="keyword">values</span>(<span class="number">12345678.90</span>,<span class="number">12345678.90</span>);</span><span class="comment">-- 正常数据</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_decimal <span class="keyword">values</span>(<span class="number">99999999.99</span>,<span class="number">99999999.99</span>);</span><span class="comment">-- 正常数据</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_decimal <span class="keyword">values</span>(<span class="number">99999999.999</span>,<span class="number">99999999.999</span>);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_decimal2(</span><br><span class="line"><span class="string">`decimal`</span> <span class="built_in">decimal</span>)<span class="keyword">charset</span> utf8;</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_decimal2 <span class="keyword">values</span>(<span class="number">23456789234567.3456783456789</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_decimal2 <span class="keyword">values</span>(<span class="number">12345678.99</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_decimal2 <span class="keyword">values</span>(<span class="number">123456789.99</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_decimal2 <span class="keyword">values</span>(<span class="number">12345678901</span>);</span></span><br></pre></td></tr></table></figure></p>
<p>decimal(65,30)</p>
<p>默认的，如果不使用括号标识decimal的长度，那么默认的是decimal(10,0);<br>凡是涉及到钱的都会在数据库端使用decimal来进行数据的存储和运算。</p>
<h2 id="字符串型">字符串型</h2><p>mysql有以下字符串类型：char，varchar，text，blob，enum，set<br>如果数据不够长度，空间依然被占用<br>如果数据超出长度，系统会报错<br>语法：char(L)，L表示长度，L表示的字符长度，L的最大值是255</p>
<p>char：定长字符串，表示磁盘会分配固定长度的空间去存储数据<br>varchar：变长字符串，表示磁盘空间会根据实际数据的长度来自动分配存储空间，但是长度不能超过指定长度varchar(L)，存储的数据只能小于或者等于L个字符，L的理论值是65535<br>varchar在存储之外还有一个额外的1到2个字节来保存当前varchar的实际占用长度<br>char和varchar对比(utf8) ：一个字符 = 3个字节<br><img src="/image/php_learn/mysql10.jpg" alt=""></p>
<p>在非严格模式下（集成环境中），都是对类型要求不严格，所以当数据类型不符合要求的时候，系统会进行自动转换或者截取，从而不报错。但是在 严格模式中，系统不会做任何处理，只会做判断，如果失败就报错。</p>
<p>如何区分使用char还是varchar</p>
<ol>
<li>所有字符串长度都必须在255之内</li>
<li>如果字符串长度是固定，那么使用char<br>md5值，身份证，手机号等等</li>
<li>如果字符串长度不固定，那么使用varchar<br>姓名，邮箱。。。</li>
</ol>
<p>char和varchar区别</p>
<ol>
<li>char的效率比varchar要高</li>
<li>varchar比char节省空间</li>
</ol>
<p>当字符串长度超过255之后，就不会使用varchar来进行数据的保存，使用text</p>
<p>text：字符串文本<br>blob：二进制文本<br>在记录里面不计算长度（不占记录长度），基本可以“无限”存储数据<br><img src="/image/php_learn/mysql11.jpg" alt=""></p>
<p>enum：枚举，列出一系列的元素，可以从一堆元素中任选一个作为实际的值（单选框）<br>语法：enum(元素1，元素2…)<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_enum(</span><br><span class="line"><span class="keyword">weekday</span> enum(<span class="string">'星期一'</span>,<span class="string">'星期二'</span>,<span class="string">'星期三'</span>,<span class="string">'星期四'</span>,<span class="string">'星期五'</span>,<span class="string">'星期六'</span>,<span class="string">'星期天'</span>)</span><br><span class="line"><span class="comment">--               1       2        3        4        5         6       7</span></span><br><span class="line">)<span class="keyword">charset</span> utf8;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_enum <span class="keyword">values</span>(<span class="string">'星期一'</span>);</span> <span class="comment">-- 正常数据，因为数据已经定义过</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_enum <span class="keyword">values</span>(<span class="string">'星期天'</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_enum <span class="keyword">values</span>(<span class="string">'星期日'</span>);</span> <span class="comment">-- 错误，因为该数据不存在</span></span><br></pre></td></tr></table></figure></p>
<p>枚举的意义？</p>
<ol>
<li>限制用户的输入（规范数据）</li>
<li>能够节省磁盘空间</li>
</ol>
<p>枚举使用2个字节来保存数据，能够保存65535个数据，是因为枚举实际保存的不是字符串而是字符串元素所对应的数值。</p>
<p>如何证明枚举实际存储的是数值呢？<br>使用算术运算符：mysql会在碰到算术运算符之后，自动进行数据转换，转换成数值类型。转换的标准与PHP一致。<br>语法：select 字段 + 0 from 表名<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">create table test<span class="emphasis">_enum(</span><br><span class="line">weekday enum('星期一','星期二','星期三','星期四','星期五','星期六','星期天')</span><br><span class="line">--               1       2        3        4        5         6       7</span><br><span class="line">)charset utf8;</span><br><span class="line"></span><br><span class="line"></span>insert into test<span class="emphasis">_enum values('星期一'); -- 正常数据，因为数据已经定义过</span><br><span class="line">insert into test_</span>enum values(<span class="emphasis">'星期天'</span>);</span><br><span class="line">insert into test<span class="emphasis">_enum values('星期日'); -- 错误，因为该数据不存在</span><br><span class="line"></span><br><span class="line"></span><span class="header">mysql&gt; select weekday + 0 from test_enum;</span><br><span class="line">+-------------+</span></span><br><span class="line"><span class="header">| weekday + 0 |</span><br><span class="line">+-------------+</span></span><br><span class="line">|           1 |</span><br><span class="line"><span class="header">|           7 |</span><br><span class="line">+-------------+</span></span><br><span class="line">2 rows in set (0.08 sec)</span><br></pre></td></tr></table></figure></p>
<p>中文如何显示<br><img src="/image/php_learn/mysql12.jpg" alt=""></p>
<p>set：集合，在定义字段之初，为字段值做一系列的限制，实际存储值的时候，可以是集合类型中的多个元素。集合相当于多选框。<br>hobby set(‘游泳’,’爬山’,’打球’,’骑车’,’旅游’);<br>集合是使用8个字节，只能保存64个数据。集合定义的数据类型里面出现的可能的元素的最多个数为64个。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_set(</span><br><span class="line">hobby <span class="keyword">set</span>(<span class="string">'游泳'</span>,<span class="string">'爬山'</span>,<span class="string">'打球'</span>,<span class="string">'骑车'</span>,<span class="string">'旅游'</span>,<span class="string">'纸牌'</span>,<span class="string">'电玩'</span>,<span class="string">'手游'</span>)</span><br><span class="line"><span class="comment">--           8      7      6     5      4      3       2     1</span></span><br><span class="line"><span class="comment">-- 每一个元素都直接占据一位作为自己的存储空间，如果当前被选中，那么值为1，否则为0</span></span><br><span class="line"><span class="comment">--          1      0      0       1      1     0       0      0===10011000</span></span><br><span class="line"><span class="comment">--          2 ^7                  2 ^ 4  2 ^ 3  = 152</span></span><br><span class="line"><span class="comment">--	    00011001</span></span><br><span class="line"><span class="comment">--             2 ^ 4 + 2 ^ 3 + 2 ^ 0 = 16 + 8 + 1 = 25</span></span><br><span class="line"><span class="comment">-- </span></span><br><span class="line">)<span class="keyword">charset</span> utf8;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_set <span class="keyword">values</span>(<span class="string">'游泳,骑车,旅游'</span>);</span> <span class="comment">-- 可以，多选</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_set <span class="keyword">values</span>(<span class="string">'爬山,打球,骑车,旅游,手游'</span>);</span> <span class="comment">-- 可以，多选</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_set <span class="keyword">values</span>(<span class="string">'游泳,爬山,打球,骑车,旅游,纸牌,电玩,手游'</span>);</span> <span class="comment">-- 可以，多选</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_set <span class="keyword">values</span>(<span class="string">'游泳,电玩,手游,打球,骑车,爬山,旅游,纸牌'</span>);</span> <span class="comment">-- 顺序全乱了，但是也ok</span></span><br></pre></td></tr></table></figure></p>
<p>集合可以在插入数据的时候，将实际的顺序给打乱，但是最终保存的时候，系统会将顺序与定义的时候的顺序对比，变成原来的。</p>
<p>原理：每一个枚举元素，都占据一个位作为自己的空间，该空间上，如果当前元素被选中，那么值为1，否则为0。最终去计算十进制结果的时候，是将所有的二进制先颠倒过来，再计算。</p>
<p>使用set的好处</p>
<ol>
<li>节省空间</li>
<li>能够规范数据</li>
</ol>
<p>对于枚举和集合，在进行数据插入的时候，还可以使用数值进行插入<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_enum <span class="keyword">values</span>(<span class="number">3</span>);</span> <span class="comment">-- 可以插入，本身存储就是数值</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_set <span class="keyword">values</span>(<span class="number">3</span>);</span> <span class="comment">-- 可以插入，本身存储也是数值，只是需要将数值进行分解</span></span><br></pre></td></tr></table></figure></p>
<p>数据库的字符串类型有很多，但是是从数据库管理员的角度出发去考虑问题。</p>
<ol>
<li>考虑磁盘空间的开销</li>
<li>考虑执行效率<br>作为PHP程序员，基本不考虑这些，只考虑如何能够方便PHP进行操作。所以真正配合PHP使用的字符串：char，varchar，和text</li>
</ol>
<p>时间日期格式<br><img src="/image/php_learn/mysql13.jpg" alt=""><br>datetime：表示年月日时分秒，能够表示9000年，占用8个字节<br>timestamp：时间戳，使用标准整型存储，表现却是年月日，时分秒<br>date：日期部分，可以表示1000-9999年<br>time：时间部分，表示的是一个时间段，从过去什么时间到以后的某个时间<br>year：年，使用一个字节存在，一个字节只能表示256个数值，在计算的时候加上1900再输出<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_date(</span><br><span class="line"><span class="string">`datetime`</span> datetime,</span><br><span class="line"><span class="string">`timestamp`</span> <span class="keyword">timestamp</span>,</span><br><span class="line"><span class="string">`date`</span> <span class="built_in">date</span>,</span><br><span class="line"><span class="string">`time`</span> <span class="keyword">time</span>,</span><br><span class="line"><span class="string">`year`</span> <span class="keyword">year</span></span><br><span class="line">)<span class="keyword">charset</span> utf8;</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_date <span class="keyword">values</span>(<span class="string">'2014-8-20 16:34:49'</span>,<span class="string">'12345678'</span>,<span class="string">'2014-8-20'</span>,<span class="string">'16:35:35'</span>,<span class="string">'2014'</span>);</span></span><br><span class="line"><span class="comment">-- 时间戳不能是PHP中的时间戳，而应该是时间戳范围内对应的日期时间格式</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_date <span class="keyword">values</span>(<span class="string">'2014-8-20 16:34:49'</span>,<span class="string">'2014-8-20 16:36:59'</span>,<span class="string">'2014-8-20'</span>,<span class="string">'16:35:35'</span>,<span class="string">'2014'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_date <span class="keyword">values</span>(<span class="string">'2014-8-20 16:34:49'</span>,<span class="string">'2014-8-20 16:36:59'</span>,<span class="string">'2014-8-20'</span>,<span class="string">'816:35:35'</span>,<span class="string">'2014'</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> test_date <span class="keyword">values</span>(<span class="string">'2014-8-20 16:34:49'</span>,<span class="string">'2014-8-20 16:36:59'</span>,<span class="string">'2014-8-20'</span>,<span class="string">'-5 16:35:35'</span>,<span class="string">'2014'</span>);</span></span><br><span class="line"><span class="comment">-- time里面的-5表示5天之前</span></span><br></pre></td></tr></table></figure></p>
<p>注意：</p>
<ol>
<li>在mysql中，任意一条记录（所有字段的集合）的长度不能超过65535个字节。<br>所以varchar能够存储的数据的真实长度会变化很大<br>GBK：varchar能够存储多少个字符？32766个字符<br>(65535 – 2) / 2 = 32766.5</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_varchar_max(</span><br><span class="line"><span class="string">`varchar`</span> <span class="built_in">varchar</span>(<span class="number">32766</span>)</span><br><span class="line">)<span class="keyword">charset</span> gbk;</span></span><br><span class="line"><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> test_varchar_max modify <span class="string">`varchar`</span> <span class="built_in">varchar</span>(<span class="number">32767</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_varchar_maxutf8(</span><br><span class="line"><span class="string">`varchar`</span> <span class="built_in">varchar</span>(<span class="number">21844</span>)</span><br><span class="line">)<span class="keyword">charset</span> utf8;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_varchar_maxgbk(</span><br><span class="line"><span class="string">`tinyint`</span> mediumint,</span><br><span class="line"><span class="string">`varchar`</span> <span class="built_in">varchar</span>(<span class="number">32765</span>)</span><br><span class="line">)<span class="keyword">charset</span> gbk;</span></span><br><span class="line"><span class="comment">-- 不可，因为刚好占满，但是没有留下空间来保存null</span></span><br></pre></td></tr></table></figure>
<ol>
<li><p>在mysql中，如果所有的字段里，没有全部不允许为null，那么需要一个字节来保存null</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_varchar_maxgbk(</span><br><span class="line"><span class="string">`tinyint`</span> mediumint <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line"><span class="string">`varchar`</span> <span class="built_in">varchar</span>(<span class="number">32765</span>) <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">)<span class="keyword">charset</span> gbk;</span></span><br><span class="line"><span class="comment">-- 可以，没有可以为null的字段，那么不需要空间来保存null值</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_varchar_maxgbk1(</span><br><span class="line"><span class="string">`tinyint`</span> <span class="built_in">smallint</span>,</span><br><span class="line"><span class="string">`varchar`</span> <span class="built_in">varchar</span>(<span class="number">32765</span>)</span><br><span class="line">)<span class="keyword">charset</span> gbk;</span></span><br><span class="line"><span class="comment">-- 留了一个字节空间用来保存null值</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>text不占存储长度空间，但是text本身需要占据10个字节来保存字段名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> test_text(</span><br><span class="line">content <span class="built_in">text</span>, <span class="comment">-- 占10个字节</span></span><br><span class="line"><span class="string">`varchar`</span> <span class="built_in">varchar</span>(<span class="number">32760</span>)</span><br><span class="line">)<span class="keyword">charset</span> gbk;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/PHP/">PHP</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PHP/">PHP</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/16/php-9-mysql-basic-knowledge/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/16/php-9-mysql-basic-knowledge/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/15/php-8-mysql-basic-knowledge/" title="php学习笔记8-mysql基础知识:数据库词汇,基本操作" itemprop="url">php学习笔记8-mysql基础知识:数据库词汇,基本操作</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-15T08:10:16.000Z" itemprop="datePublished"> 发表于 2015-05-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="数据库词汇">数据库词汇</h2><p>数据：data，凡是能携带信息的媒介都是数据</p>
<ol>
<li>硬盘数据：保存在磁盘中，以二进制形式保存</li>
<li>内存数据：运行在内存中</li>
</ol>
<p>数据库：Database，高效存储和处理数据的媒介（凡是存放数据的地方都可以称之为数据库）<br>数据库分为两大阵营：关系型数据库，非关系型数据库。<br>数据库系统：Database System = DBMS +DB，DBMS（Database Management System）管理数据库<br>DBA：Database Administrator，DBA待遇非常好。</p>
<h2 id="关系型数据库SQL">关系型数据库SQL</h2><p>关系型数据库：大型（ORACLE，DB2），中型（mysql，SqlServer），小型（access）<br>mysql：最高并发量千万级，免费<br>ORACLE：收费</p>
<p>定义：建立在关系模型上的数据库。<br>关系模型：通过各种关系来体现数据与数据之间的联系的模型。</p>
<p>通俗：关系型数据库就是一张二维表（具有行和列，还有表头），用来管理表内的数据关系和表与表之间的关系。</p>
<p>关系型数据库特点：如果某个数据不完整，那么数据库在磁盘空间上一样的需要分配空间来保存该数据。关系型数据库比较占磁盘空间。</p>
<h2 id="非关系型数据库">非关系型数据库</h2><p>定义：所有不是关系型数据库的数据库都是非关系型数据库<br>NOSQL：Not Only SQL。<br>非关系型数据库保存数据的方式：键值对</p>
<p>特点：</p>
<ol>
<li>运行在内存</li>
<li>使用键值对来保存和表示数据</li>
<li>运行之后，会进行数据同步（将内存的数据写入到磁盘）</li>
</ol>
<p>关系型数据库和非关系型数据对比</p>
<ol>
<li>保存数据的介质不同（关系型在磁盘，非关系型在内存）</li>
<li>非关系型数据库效率比关系型数据库高得多</li>
<li>关系型数据库比非关系型数据库安全</li>
</ol>
<p>是一种关系型数据库操作语言，也是一种编程语言<br>SQL：Structured Query Language，结构化查询语言。<br>SQL包含三个部分：<br>DDL：Data Definition Language，数据定义语言，库和表的维护create，drop，alter<br>DML：Data manipulation Language，数据操作语言（DQL：Data Query Language），数据的查询，select<br>DCL：Data Control Language，数据控制语言，用于数据库的权限管理，grant，revoke</p>
<h2 id="SQL的基本操作">SQL的基本操作</h2><p>CRUD：create（创建：增），read/retrieve（读取：查），update（更新：改），delete（删除：删）</p>
<h2 id="软件结构">软件结构</h2><p>mysql是一种c/s软件结构。在运行之前，必须保证服务端和客户端同时运行才能正常工作。</p>
<p>工作流程</p>
<ol>
<li><p>客户端发送连接请求，建立连接：mysql –h –P –u –p<br>a)    h：host，ip地址或者域名，默认可以没有代表localhost<br>b)    P：大写，端口默认为3306<br>c)    u：username，用户名<br>d)    p：password，用户密码</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;mysql<span class="class">.exe</span> -h127.<span class="number">0.0</span>.<span class="number">1</span> -P3306 -uroot -<span class="tag">p</span></span><br><span class="line">Enter password: *</span><br></pre></td></tr></table></figure>
</li>
<li><p>准备SQL语句：逐行执行，以分号为结束符</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="literal">show</span> databases<span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>发送SQL语句：发送给服务器</p>
</li>
<li>服务器接收SQL并执行</li>
<li>服务器发送执行结果给客户端</li>
<li><p>客户端解析结果</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span></span><br><span class="line"><span class="header">| Database           |</span><br><span class="line">+--------------------+</span></span><br><span class="line">| information<span class="emphasis">_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_</span>schema |</span><br><span class="line"><span class="header">| test               |</span><br><span class="line">+--------------------+</span></span><br><span class="line">4 rows in set (0.17 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭连接<br>a)    exit<br>b)    quit<br>c)    \q</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">exit</span></span><br><span class="line">Bye</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>mysql客户端操作服务端原理<br><img src="/image/php_learn/mysql1.jpg" alt=""><br>所有的处理操作都是在服务端，客户端只是负责发送SQL语句和接收执行结果，并解析。</p>
<h2 id="管理服务端">管理服务端</h2><p>windows下有三种方式进行服务端管理</p>
<ol>
<li>windows服务管理</li>
<li><p>通过服务命令在dos（CMD）下管理<br>net：管理服务<br>net start|stop 服务名</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="command">\Users</span><span class="command">\Administrator</span>&gt;net stop mysql</span><br><span class="line">MySQL 服务正在停止.</span><br><span class="line">MySQL 服务已成功停止。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C:<span class="command">\Users</span><span class="command">\Administrator</span>&gt;net start mysql</span><br><span class="line">MySQL 服务正在启动 .</span><br><span class="line">MySQL 服务已经启动成功。</span><br></pre></td></tr></table></figure>
</li>
<li><p>直接通过mysqld.exe启动<br>mysqld的执行必须要指定配置文件才能启动成功<br>mysqld.exe –defaults-file=d:/server/mysql/my.ini</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">C:</span>\Users\Administrator&gt;mysqld.exe –defaults-file=<span class="string">d:</span><span class="regexp">/server/</span>mysql/my.ini</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="服务端内部结构">服务端内部结构</h2><p>服务器是由数据库系统在帮助运行。<br>在服务器端，有四个对象，分别是：数据库管理系统-&gt;数据库-&gt;数据表-&gt;数据字段-&gt;管理数据<br><img src="/image/php_learn/mysql2.jpg" alt=""></p>
<h2 id="数据库基本操作">数据库基本操作</h2><p>数据库基本操作包含三个部分：库操作，表操作（字段操作），数据操作</p>
<h3 id="库操作">库操作</h3><p>SQL语句是以行为执行单位，每行结束都应该有结束符号分号（有特例：建议每行语句都有分号）</p>
<h4 id="新增数据库">新增数据库</h4><p>create database 数据库名字 [库选项];</p>
<p>库选项：<br>字符集设置（charset）：表示以后在当前数据库存储的数据，默认采用utf-8的字符集存储<br>校对集设置（collate）：如何比较大小<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">- 两个中划线+空格，是sql语句的一种注释</span><br><span class="line"></span>-<span class="ruby">- 库操作</span><br><span class="line"></span>-<span class="ruby">- 创建数据库</span><br><span class="line"></span>-<span class="ruby">- create database mydatabase charset utf8;</span><br><span class="line"></span></span><br><span class="line">mysql&gt; create database mydatabase charset utf8;</span><br><span class="line">Query OK, 1 row affected (0.29 sec)</span><br></pre></td></tr></table></figure></p>
<p>执行以上语句，数据库管理系统做了哪些事情？</p>
<ol>
<li>创建了一个叫做mydatabase的数据库（默认使用utf8来存储数据）</li>
<li>会在磁盘里开辟一块空间来存储数据（对应外部体现就是创建一个文件夹，文件夹的名字叫做mydatabase）<br>文件夹的路径可以通过my.ini查看</li>
<li>库选项在数据库文件夹下有一个对应的文件db.opt</li>
</ol>
<p>数据库命名规范</p>
<ol>
<li>使用字母，下划线和数字构成</li>
<li>不能是关键字，如果是关键字，需要使用反引号将名字包裹<br>a)    反引号：esc下面的波浪线按键对应的英文状态下的输出</li>
<li>可以使用中文作为数据库名字，但是也需要使用反引号（强烈建议：不用使用中文）</li>
</ol>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 关键字</span></span><br><span class="line">create database database charset utf8; <span class="comment">-- 错误</span></span><br><span class="line">create database `database` charset utf8; <span class="comment">-- 正确</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 中文</span></span><br><span class="line">create database `中国` charset utf8;</span><br><span class="line"></span><br><span class="line">mysql&gt;  <span class="keyword">set</span> names gbk;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.06</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create database `中国` charset utf8;</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.15</span> sec)</span><br><span class="line"><span class="comment">-- 中文</span></span><br></pre></td></tr></table></figure>
<h4 id="查看数据库">查看数据库</h4><p>查看数据库基本信息：show databases;||模糊查询：show databases like ‘pattern’</p>
<p>查看所有<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span></span><br><span class="line"><span class="header">| Database           |</span><br><span class="line">+--------------------+</span></span><br><span class="line">| information<span class="emphasis">_schema |</span><br><span class="line">| 中国                  |</span><br><span class="line">| mydatabase         |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_</span>schema |</span><br><span class="line"><span class="header">| test               |</span><br><span class="line">+--------------------+</span></span><br><span class="line">6 rows in set (0.08 sec)</span><br></pre></td></tr></table></figure></p>
<p>模糊匹配：%匹配任何内容，_表示匹配一个字符<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">show databases like <span class="emphasis">'data%'</span>; -- 匹配所有以Data开始的数据库</span><br><span class="line">show databases like <span class="emphasis">'databas_'</span>; -- 匹配所有以databas开始，然后后面跟一个字符的数据库</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; show databases like 'data%';</span><br><span class="line">+------------------+</span></span><br><span class="line"><span class="header">| Database (data%) |</span><br><span class="line">+------------------+</span></span><br><span class="line"><span class="header">| database         |</span><br><span class="line">+------------------+</span></span><br><span class="line">1 row in set (0.08 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; show databases like 'databas_';</span><br><span class="line">+---------------------+</span></span><br><span class="line"><span class="header">| Database (databas_) |</span><br><span class="line">+---------------------+</span></span><br><span class="line"><span class="header">| database            |</span><br><span class="line">+---------------------+</span></span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<p>下划线使用<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">databases</span> <span class="keyword">like</span> <span class="string">'information_%'</span>;</span> <span class="comment">-- 匹配所有以information开始，后面接任何内容</span></span><br><span class="line"><span class="comment">-- 匹配下划线：需要转义符号</span></span><br><span class="line"><span class="operator"><span class="keyword">show</span> <span class="keyword">databases</span> <span class="keyword">like</span> <span class="string">'information\_%'</span>;</span> <span class="comment">-- 匹配所有以information_开始，后面匹配所有</span></span><br></pre></td></tr></table></figure></p>
<p>查看数据库创建语句：show create database 数据库名字<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; show create database `database`;</span><br><span class="line">+----------+-------------------------------------------------------------------+</span></span><br><span class="line"></span><br><span class="line">| Database | Create Database                                                   |</span><br><span class="line"></span><br><span class="line"><span class="code">+----------+</span>-------------------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">| database | CREATE DATABASE <span class="code">`database`</span> /<span class="strong">*!40100 DEFAULT CHARACTER SET utf8 *</span>/ |</span><br><span class="line"></span><br><span class="line"><span class="code">+----------+</span>-------------------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<p>修改数据库：数据库名称不可修改，只能修改数据库的库选项<br>语法：alter database 数据库名字 [库选项]<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改数据库的库选项</span></span><br><span class="line"><span class="operator"><span class="keyword">alter</span> <span class="keyword">database</span> mydatabase <span class="keyword">charset</span> gbk;</span>	<span class="comment">-- 将数据库mydatabase的字符集改成gbk</span></span><br></pre></td></tr></table></figure></p>
<h4 id="删除数据库">删除数据库</h4><p>drop Database 数据库名字;<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除数据库</span></span><br><span class="line"><span class="operator"><span class="keyword">drop</span> <span class="keyword">database</span> <span class="string">`database`</span>;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="表操作">表操作</h3><p>表不能脱离字段存在，字段也不能脱离表，所谓的表操作就是表和字段同时操作<br>新增表：create table 表名(字段1 字段类型,字段2 字段类型)[表选项]</p>
<ol>
<li>字段必须要有字段类型：字段 字段类型</li>
<li>字段与字段之间使用逗号分隔</li>
<li>最后一个字段不需要使用逗号</li>
</ol>
<p>表选项<br>字符集：当前表的数据采用什么字符集保存，字符集以表的字符集为标准<br>存储引擎：当前表的数据采用什么样的存储引擎来存储</p>
<p>存储引擎：不同存储和处理数据的方式<br>注意：数据表必须存储在数据库的内部。</p>
<h4 id="创建数据表">创建数据表</h4><ol>
<li><p>显示指定数据库：在创建表名的时候使用：库.表名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 表操作</span></span><br><span class="line"><span class="comment">-- 创建数据表</span></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> mydatabase.mytable(</span><br><span class="line">id <span class="built_in">int</span>, <span class="comment">-- id为整型</span></span><br><span class="line">name <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="comment">-- name为字符串类型</span></span><br><span class="line">) <span class="keyword">charset</span> utf8 <span class="keyword">engine</span> <span class="keyword">innodb</span>;</span>	<span class="comment">-- 存储引擎为InnoDB，默认为这个，不写也一样</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>隐式的指定数据：事先进入到某个数据库的环境：use 数据库名字</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">use</span> mydatabase;</span></span><br><span class="line"><span class="operator"><span class="keyword">create</span> <span class="keyword">table</span> mytable2(</span><br><span class="line">id <span class="built_in">int</span>,</span><br><span class="line">name <span class="built_in">varchar</span>(<span class="number">10</span>)</span><br><span class="line">)<span class="keyword">charset</span> utf8;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>创建表语句执行之后的结果：在对应的数据库文件夹下创建两个对应的数据表的结构文件 mytable.frm 和 mytable2.frm<br>该结构与选定的存储引擎有关系。</p>
<p>存储引擎：有多种，InnoDB和Myisam<br>InnoDB：只会创建一个表结构文件，其他的索引和数据存放在ibdata1文件中<br>Myisam：会创建三个文件，一个是结构文件，一个是数据文件，一个是索引文件</p>
<h4 id="查看表">查看表</h4><ol>
<li><p>查看表基本信息：show tables || show tables like ‘pattern’;</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mydatabase;</span><br><span class="line">Database changed</span><br><span class="line"><span class="header">mysql&gt; show tables;</span><br><span class="line">+----------------------+</span></span><br><span class="line"><span class="header">| Tables_in_mydatabase |</span><br><span class="line">+----------------------+</span></span><br><span class="line">| mytable              |</span><br><span class="line">| mytable2             |</span><br><span class="line"><span class="header">| mytable3             |</span><br><span class="line">+----------------------+</span></span><br><span class="line">3 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; show tables like 'mytable_';</span><br><span class="line">+---------------------------------+</span></span><br><span class="line"><span class="header">| Tables_in_mydatabase (mytable_) |</span><br><span class="line">+---------------------------------+</span></span><br><span class="line">| mytable2                        |</span><br><span class="line"><span class="header">| mytable3                        |</span><br><span class="line">+---------------------------------+</span></span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看表的创建语句：show create table 表名;</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; show create table mytable;</span><br><span class="line">+---------+--------------------------------------------------</span></span><br><span class="line">---------------------------------------------------------+</span><br><span class="line">| Table   | Create Table</span><br><span class="line"><span class="header">                                                         |</span><br><span class="line">+---------+--------------------------------------------------</span></span><br><span class="line">---------------------------------------------------------+</span><br><span class="line">| mytable | CREATE TABLE <span class="code">`mytable`</span> (</span><br><span class="line"><span class="code">  `id` int(11) DEFAULT NULL,</span></span><br><span class="line"><span class="code">  `name` varchar(10) DEFAULT NULL</span></span><br><span class="line"><span class="header">) ENGINE=InnoDB DEFAULT CHARSET=utf8 |</span><br><span class="line">+---------+--------------------------------------------------</span></span><br><span class="line">---------------------------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看表结构：desc|describe 表名/show columns from 表名</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; desc mytable;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in set (0.10 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; describe mytable2;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; show columns from mytable;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="修改表">修改表</h4><p>可以修改表的名字，表的字段的增删改查，字段的属性的修改，字段的位置的修改<br>语法：alter table 表名 [add/modify/drop] [column] 字段名字 [字段类型] [字段位置]</p>
<p>增加字段<br>alter table 表名 add column 字段名字 字段类型 [位置]<br>字段默认在表最后增加<br>位置：first表示在最前面，after表示在某个字段之后（默认其实是after在最后一个字段之后）<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; desc mytable1;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table mytable1 add column age int;</span><br><span class="line">Query OK, 0 rows affected (0.30 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; desc mytable1;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; alter table mytable1 add first int first; -- 在mytable1的最前面增加一个整</span><br><span class="line">型first字段</span><br><span class="line">Query OK, 0 rows affected (0.64 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; desc mytable1;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| first | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">4 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure></p>
<h4 id="修改字段">修改字段</h4><p>修改字段位置，修改字段的类型，修改字段的名字<br>修改字段类型+字段位置<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">alter table mytable1 modify first varchar(10) after age;</span><br><span class="line"><span class="bullet">-- </span>修改表中first字段的字段类型为varchar，并且将位置放到age字段之后</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; desc mytable1;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| first | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table mytable1 modify first varchar(10) after age;</span><br><span class="line">Query OK, 0 rows affected (0.26 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; desc mytable1;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| first | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">4 rows in set (0.07 sec)</span><br></pre></td></tr></table></figure></p>
<p>修改字段名字<br>alter table 表名 change 旧字段 new字段 字段类型 字段位置</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">alter table mytable1 change first second varchar(10);</span><br><span class="line"><span class="bullet">-- </span>修改first字段名字为second</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; desc mytable1;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| first | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">4 rows in set (0.07 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table mytable1 change first second varchar(10</span><br><span class="line">Query OK, 0 rows affected (0.33 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt;  desc mytable1;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id     | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name   | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">| age    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| second | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span></span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>注意：不管是修改字段的那部分都应该跟上字段类型</p>
<h4 id="删除字段">删除字段</h4><p>alter table 表名 drop 字段名字<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">alter table mytable1 drop second; -- 删除second字段</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt;  desc mytable1;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id     | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name   | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">| age    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| second | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span></span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table mytable1 drop second;</span><br><span class="line">Query OK, 0 rows affected (0.32 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; desc mytable1;</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="header">| Field | Type        | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(10) | YES  |     | NULL    |       |</span><br><span class="line"><span class="header">| age   | int(11)     | YES  |     | NULL    |       |</span><br><span class="line">+-------+-------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<h4 id="修改表名">修改表名</h4><p>语法：rename table 旧表名 to 新表名<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-- </span>修改表结构</span><br><span class="line">rename table mytable to mytable1; -- 将mytable改名为mytable1</span><br><span class="line"></span><br><span class="line">mysql&gt; rename table mytable to mytable1; -- 将mytable改名为mytable1</span><br><span class="line">Query OK, 0 rows affected (0.18 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; show tables;</span><br><span class="line">+----------------------+</span></span><br><span class="line"><span class="header">| Tables_in_mydatabase |</span><br><span class="line">+----------------------+</span></span><br><span class="line">| mytable1             |</span><br><span class="line">| mytable2             |</span><br><span class="line"><span class="header">| mytable3             |</span><br><span class="line">+----------------------+</span></span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<h4 id="删除表">删除表</h4><p>drop table 表名<br>删除表还会对表文件进行删除<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">mysql&gt; show tables;</span><br><span class="line">+----------------------+</span></span><br><span class="line"><span class="header">| Tables_in_mydatabase |</span><br><span class="line">+----------------------+</span></span><br><span class="line">| mytable1             |</span><br><span class="line">| mytable2             |</span><br><span class="line"><span class="header">| mytable3             |</span><br><span class="line">+----------------------+</span></span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; drop table mytable3;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; show tables;</span><br><span class="line">+----------------------+</span></span><br><span class="line"><span class="header">| Tables_in_mydatabase |</span><br><span class="line">+----------------------+</span></span><br><span class="line">| mytable1             |</span><br><span class="line"><span class="header">| mytable2             |</span><br><span class="line">+----------------------+</span></span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<h4 id="注意">注意</h4><ol>
<li><p>创建过程中会不知道当前表名是否存在：if not exists表示只有表名不存在的时候才去创建，否则放弃执行；</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table if not exists mytable1(</span><br><span class="line"><span class="code">    -&gt; id int</span></span><br><span class="line"><span class="code">    -&gt; )charset utf8;</span></span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; show warnings;</span><br><span class="line">+-------+------+---------------------------------+</span></span><br><span class="line"><span class="header">| Level | Code | Message                         |</span><br><span class="line">+-------+------+---------------------------------+</span></span><br><span class="line"><span class="header">| Note  | 1050 | Table 'mytable1' already exists |</span><br><span class="line">+-------+------+---------------------------------+</span></span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除表的过程中，不知道表是否已经存在：if exists</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop table mytable3; -- 表不存在</span><br><span class="line">ERROR 1051 (42S02): Unknown table <span class="emphasis">'mytable3'</span></span><br><span class="line">mysql&gt; drop table if exists mytable3; -- 表不存在</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; show warnings;</span><br><span class="line">+-------+------+--------------------------+</span></span><br><span class="line"><span class="header">| Level | Code | Message                  |</span><br><span class="line">+-------+------+--------------------------+</span></span><br><span class="line"><span class="header">| Note  | 1051 | Unknown table 'mytable3' |</span><br><span class="line">+-------+------+--------------------------+</span></span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
</li>
<li><p>数据库和数据表都不能随意的删除，删除具有不可逆性。如果确定要删除数据库或者数据表，那么必须要事先备份。</p>
</li>
</ol>
<h2 id="数据操作">数据操作</h2><h3 id="插入数据">插入数据</h3><p>新增数据：insert into 表名 (字段列表) values(值列表)<br>字段列表可以没有，意味着值列表里的字段数必须与表中的字段数完全一致<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">insert</span> into mytable1 <span class="built_in">values</span>(<span class="number">1</span>,<span class="string">'Hanmeimei'</span>,<span class="number">18</span>); -- 插入一个与表字段完全一致的记录</span><br><span class="line">-- 注意：<span class="built_in">values</span>里面的数据值，必须与字段顺序完全对应上</span><br><span class="line">-- <span class="built_in">insert</span> into mytable1 <span class="built_in">values</span>(<span class="string">'Hanmeimei'</span>,<span class="number">2</span>,<span class="number">18</span>); -- 错误，因为顺序不对</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">insert</span> into mytable1 <span class="built_in">values</span>(<span class="number">1</span>,<span class="string">'Hanmeimei'</span>,<span class="number">18</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.11</span> sec)</span><br></pre></td></tr></table></figure></p>
<p>插入数据必须注意</p>
<ol>
<li>插入的值类型必须与数据字段定义的数据类型一致，除了整型可以不加引号之外，其他的都要加上引号</li>
<li>整型也可以加上引号<br>在严格模式下，只能将数值字符串转化成数值<br>在严格模式下，自增不能使用空字符串来代替</li>
<li>允许一次性插入多条记录，在values字段后面使用逗号分隔即可</li>
</ol>
<h3 id="查看数据">查看数据</h3><p>select 字段列表 from 表名 [where 条件]<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; select * from mytable1;</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line"><span class="header">| id   | name      | age  |</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line"><span class="header">|    1 | Hanmeimei |   18 |</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt; select name,age from  mytable1;</span><br><span class="line">+-----------+------+</span></span><br><span class="line"><span class="header">| name      | age  |</span><br><span class="line">+-----------+------+</span></span><br><span class="line"><span class="header">| Hanmeimei |   18 |</span><br><span class="line">+-----------+------+</span></span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from mytable1 where age &gt; 20;</span><br><span class="line">Empty set (0.09 sec)</span><br></pre></td></tr></table></figure></p>
<h3 id="修改（更新）数据">修改（更新）数据</h3><p>update 表名 set 字段 = 值 [where条件]<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update mytable1 set age = 19 where id = 1;-- 修改id为1数据的age字段的值为</span><br><span class="line">19</span><br><span class="line">Query OK, 1 row affected (0.12 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; update mytable1 set age=30,name=<span class="emphasis">'Tom'</span> where id = 2;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Rows matched: 0  Changed: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; -- 修改id为2数据的年龄和名字字段</span><br><span class="line"><span class="header">mysql&gt;  select * from mytable1;</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line"><span class="header">| id   | name      | age  |</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line">|    1 | Hanmeimei |   19 |</span><br><span class="line">|    3 | Jim       |   22 |</span><br><span class="line">|    4 | Green     |   23 |</span><br><span class="line"><span class="header">|    5 | Polly     |   35 |</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<h3 id="删除数据">删除数据</h3><p>delete from 表名 [where条件]<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt;  select * from mytable1;</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line"><span class="header">| id   | name      | age  |</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line">|    1 | Hanmeimei |   19 |</span><br><span class="line">|    3 | Jim       |   22 |</span><br><span class="line">|    4 | Green     |   23 |</span><br><span class="line"><span class="header">|    5 | Polly     |   35 |</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; delete from mytable1 where id = 5; -- 删除id为5的值的记录</span><br><span class="line">Query OK, 1 row affected (0.11 sec)</span><br><span class="line"></span><br><span class="line"><span class="header">mysql&gt;  select * from mytable1;</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line"><span class="header">| id   | name      | age  |</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line">|    1 | Hanmeimei |   19 |</span><br><span class="line">|    3 | Jim       |   22 |</span><br><span class="line"><span class="header">|    4 | Green     |   23 |</span><br><span class="line">+------+-----------+------+</span></span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<h3 id="注意-1">注意</h3><p>一定要小心删除数据，切记需要使用where条件，在删除之前需要对数据进行备份</p>
<p>行（row）和记录（record）：行和记录表示的意思是完全一样的，行是站在表结构的角度上定义，而记录是站在数据的角度上去定义<br>列（column）和字段（Field）：与行和记录的区别是一样的。</p>
<h2 id="字符集问题（乱码问题）">字符集问题（乱码问题）</h2><ol>
<li>mytable1存储的数据是utf8字符集（在创建表的时候，指定了表的数据存储字符集为utf8）</li>
<li>cmd控制台只能是gbk格式的数据：说明cmd下只能输入和显示gbk格式的数据</li>
<li>set names gbk的功能</li>
</ol>
<p>客户端与服务端进行不同编码的通信的原理<br><img src="/image/php_learn/mysql3.jpg" alt=""></p>
<p>了解数据库的字符集<br>查看数据库支持哪些字符集？show character set;<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show character set;</span><br><span class="line">+----------+-----------------------------+---------------------+--------+</span><br><span class="line"><span class="string">| Charset  | Description                 | Default collation   | Maxlen |</span></span><br><span class="line">+----------+-----------------------------+---------------------+--------+</span><br><span class="line"><span class="string">| big5     | Big5 Traditional Chinese    | big5_chinese_ci     |      2 |</span></span><br><span class="line"><span class="string">| dec8     | DEC West European           | dec8_swedish_ci     |      1 |</span></span><br><span class="line"><span class="string">| cp850    | DOS West European           | cp850_general_ci    |      1 |</span></span><br><span class="line"><span class="string">| hp8      | HP West European            | hp8_english_ci      |      1 |</span></span><br><span class="line"><span class="string">| koi8r    | KOI8-R Relcom Russian       | koi8r_general_ci    |      1 |</span></span><br><span class="line"><span class="string">| latin1   | cp1252 West European        | latin1_swedish_ci   |      1 |</span></span><br><span class="line"><span class="string">| latin2   | ISO 8859-2 Central European | latin2_general_ci   |      1 |</span></span><br><span class="line"><span class="string">| swe7     | 7bit Swedish                | swe7_swedish_ci     |      1 |</span></span><br><span class="line"><span class="string">| ascii    | US ASCII                    | ascii_general_ci    |      1 |</span></span><br><span class="line"><span class="string">| ujis     | EUC-JP Japanese             | ujis_japanese_ci    |      3 |</span></span><br><span class="line"><span class="string">| sjis     | Shift-JIS Japanese          | sjis_japanese_ci    |      2 |</span></span><br><span class="line"><span class="string">| hebrew   | ISO 8859-8 Hebrew           | hebrew_general_ci   |      1 |</span></span><br><span class="line"><span class="string">| tis620   | TIS620 Thai                 | tis620_thai_ci      |      1 |</span></span><br><span class="line"><span class="string">| euckr    | EUC-KR Korean               | euckr_korean_ci     |      2 |</span></span><br><span class="line"><span class="string">| koi8u    | KOI8-U Ukrainian            | koi8u_general_ci    |      1 |</span></span><br><span class="line"><span class="string">| gb2312   | GB2312 Simplified Chinese   | gb2312_chinese_ci   |      2 |</span></span><br><span class="line"><span class="string">| greek    | ISO 8859-7 Greek            | greek_general_ci    |      1 |</span></span><br><span class="line"><span class="string">| cp1250   | Windows Central European    | cp1250_general_ci   |      1 |</span></span><br><span class="line"><span class="string">| gbk      | GBK Simplified Chinese      | gbk_chinese_ci      |      2 |</span></span><br><span class="line"><span class="string">| latin5   | ISO 8859-9 Turkish          | latin5_turkish_ci   |      1 |</span></span><br><span class="line"><span class="string">| armscii8 | ARMSCII-8 Armenian          | armscii8_general_ci |      1 |</span></span><br><span class="line"><span class="string">| utf8     | UTF-8 Unicode               | utf8_general_ci     |      3 |</span></span><br><span class="line"><span class="string">| ucs2     | UCS-2 Unicode               | ucs2_general_ci     |      2 |</span></span><br><span class="line"><span class="string">| cp866    | DOS Russian                 | cp866_general_ci    |      1 |</span></span><br><span class="line"><span class="string">| keybcs2  | DOS Kamenicky Czech-Slovak  | keybcs2_general_ci  |      1 |</span></span><br><span class="line"><span class="string">| macce    | Mac Central European        | macce_general_ci    |      1 |</span></span><br><span class="line"><span class="string">| macroman | Mac West European           | macroman_general_ci |      1 |</span></span><br><span class="line"><span class="string">| cp852    | DOS Central European        | cp852_general_ci    |      1 |</span></span><br><span class="line"><span class="string">| latin7   | ISO 8859-13 Baltic          | latin7_general_ci   |      1 |</span></span><br><span class="line"><span class="string">| utf8mb4  | UTF-8 Unicode               | utf8mb4_general_ci  |      4 |</span></span><br><span class="line"><span class="string">| cp1251   | Windows Cyrillic            | cp1251_general_ci   |      1 |</span></span><br><span class="line"><span class="string">| utf16    | UTF-16 Unicode              | utf16_general_ci    |      4 |</span></span><br><span class="line"><span class="string">| cp1256   | Windows Arabic              | cp1256_general_ci   |      1 |</span></span><br><span class="line"><span class="string">| cp1257   | Windows Baltic              | cp1257_general_ci   |      1 |</span></span><br><span class="line"><span class="string">| utf32    | UTF-32 Unicode              | utf32_general_ci    |      4 |</span></span><br><span class="line"><span class="string">| binary   | Binary pseudo charset       | binary              |      1 |</span></span><br><span class="line"><span class="string">| geostd8  | GEOSTD8 Georgian            | geostd8_general_ci  |      1 |</span></span><br><span class="line"><span class="string">| cp932    | SJIS for Windows Japanese   | cp932_japanese_ci   |      2 |</span></span><br><span class="line"><span class="string">| eucjpms  | UJIS for Windows Japanese   | eucjpms_japanese_ci |      3 |</span></span><br><span class="line">+----------+-----------------------------+---------------------+--------+</span><br><span class="line"><span class="number">39</span> rows in set (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure></p>
<p>查看服务器对客户端的默认识别方式：将客户端当前何种字符集对待。<br>show variables like ‘character<em>set</em>%’;<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">mysql&gt; show variables like 'character_set%';</span><br><span class="line">+--------------------------+---------------------------------+</span></span><br><span class="line"><span class="header">| Variable_name            | Value                           |</span><br><span class="line">+--------------------------+---------------------------------+</span></span><br><span class="line">| character<span class="emphasis">_set_</span>client     | gbk                             |</span><br><span class="line">| character<span class="emphasis">_set_</span>connection | gbk                             |</span><br><span class="line">| character<span class="emphasis">_set_</span>database   | utf8                            |</span><br><span class="line">| character<span class="emphasis">_set_</span>filesystem | binary                          |</span><br><span class="line">| character<span class="emphasis">_set_</span>results    | gbk                             |</span><br><span class="line">| character<span class="emphasis">_set_</span>server     | utf8                            |</span><br><span class="line">| character<span class="emphasis">_set_</span>system     | utf8                            |</span><br><span class="line"><span class="header">| character_sets_dir       | F:\server\mysql\share\charsets\ |</span><br><span class="line">+--------------------------+---------------------------------+</span></span><br><span class="line">8 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<ol>
<li>要保证服务器能够正确识别客户端传过去的数据，只要保证character_set_client的字符集与客户端的字符集一致即可。<br>set character_set_client = gbk;</li>
<li>要保证服务器能够正确的给客户端提供对应字符集的数据，只要保证character_set_results与客户端的字符集一致即可<br>set character_set_results = gbk;</li>
<li>set names gbk:所做的事情就是将传输数据以及接受数据都设置成当前客户端的字符集<br>set names gbk;<br>&lt;=========&gt;<br>set character_set_client = gbk;<br>set character_set_connection = gbk;<br>set character_set_results = gbk</li>
</ol>
<p>character_set_database表示的是当前数据库的字符集。<br>set character_set_database = gbk;</p>
<p>在使用cmd下面的mysql.exe的时候：set names gbk<br>在使用EditPlus的时候，EditPlus下面的编码是ANSI，ANSI代表当前电脑默认的字符集，中国大陆销售的电脑默认都是gbk编码：set names gbk<br>在使用EditPlus的时候，EditPlus下面的编码是utf-8：set names utf8</p>
<p>一旦数据库存储的数据本身是乱码，那么任何修改都不可以生效，全部查看到的都是乱码。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/PHP/">PHP</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PHP/">PHP</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/15/php-8-mysql-basic-knowledge/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/15/php-8-mysql-basic-knowledge/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/14/linux-kernel-2-disassembling-how-operating-system-works/" title="Linux内核分析2-操作系统是如何工作的？" itemprop="url">Linux内核分析2-操作系统是如何工作的？</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-14T13:42:31.000Z" itemprop="datePublished"> 发表于 2015-05-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>王志刚，学习笔记，《Linux内核分析》MOOC 课程 <a href="http://mooc.study.163.com/course/USTC-1000029000" target="_blank" rel="external">http://mooc.study.163.com/course/USTC-1000029000</a></p>
<h2 id="计算机是如何工作的">计算机是如何工作的</h2><p>三个基础性并且非常重要的概念：</p>
<ul>
<li>存储程序计算机：所有计算基础性的逻辑框架。</li>
<li>函数调用堆栈</li>
<li>中断机制</li>
</ul>
<h3 id="与堆栈有关的寄存器">与堆栈有关的寄存器</h3><p>– esp，堆栈指针（stack pointer）<br>– ebp，基址指针（base pointer）</p>
<p>堆栈操作<br>– push<br>栈顶地址减少4个字节（32位）<br>– pop<br>栈顶地址增加4个字节</p>
<p>ebp在C语言中用作记录当前函数调用基址</p>
<h3 id="其他关键寄存器">其他关键寄存器</h3><p>– cs : eip：总是指向下一条的指令地址</p>
<p>• 顺序执行：总是指向地址连续的下一条指令<br>• 跳转/分支：执行这样的指令的时候，cs : eip的值会根据程序需要被修改<br>• call：将当前cs : eip的值压入栈顶，cs : eip指向被调用函数的入口地址<br>• ret：从栈顶弹出原来保存在这里的cs : eip的值，放入cs : eip中</p>
<h3 id="函数堆栈框架的形成">函数堆栈框架的形成</h3><ul>
<li><p>call xxx</p>
<ul>
<li>执行call之前</li>
<li>执行call时，cs : eip原来的值指向call下一条指令，该值被保存到栈顶，然后cs : eip的值指向xxx的入口地址</li>
</ul>
</li>
<li><p>进入xxx</p>
<ul>
<li>第一条指令： pushl %ebp</li>
<li>第二条指令： movl %esp, %ebp</li>
<li>函数体中的常规操作，可能会压栈、出栈</li>
</ul>
</li>
<li><p>退出xxx</p>
<ul>
<li>movl %ebp,%esp</li>
<li>popl %ebp</li>
<li>ret</li>
</ul>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Linux/">Linux</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/14/linux-kernel-2-disassembling-how-operating-system-works/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/14/linux-kernel-2-disassembling-how-operating-system-works/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/14/firefox-autoproxy-freegate-over-wall/" title="Firefox+autoproxy+自由门翻墙" itemprop="url">Firefox+autoproxy+自由门翻墙</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-14T04:21:20.000Z" itemprop="datePublished"> 发表于 2015-05-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="前言">前言</h2><p>受限于伟大的 GFW（Great Firewall,常用简称:GFW,中文也称中国国家防火墙、长城防火墙或万里防火墙），<br>程序员很多技术资料都看不了，下不到。这样一来，翻墙就变成了一个要掌握的技能。<br>翻墙也成为了很多技术人以及很多不想被蒙蔽的人的需求，在这个市场经济里，常常是有需求，就有人满足你的需求，把它变成一个商品，这个商品就是VPN。如果你不想要折腾，那么花钱买服务不失为一个很好的选择，也不贵一年才几百块钱。<br>我是一个能不花钱就不花钱的具有穷人思维的爱折腾的人，关于翻墙，最直接的方式是改hosts，它能让你实现部分网址的翻墙。我一年前折腾过GoAgent，用了一段时间，但是GoAgent到2015年失效了。试过免费VPN，强烈不推荐去搞这个，几乎所有的免费VPN上网都不畅，服务很烂。GoAgent的设置也很麻烦，而GoAgent需要注册IP，注册IP需要google账户，google账户需要翻墙，这是一个死循环，当初我是用限时免费VPN翻墙注册google账户。况且现在GoAgent都失效了，也不值得去搞了。<br>昨天，我尝试着用 Firefox+autoproxy+自由门 的方式去翻墙，发现挺简单的。试用了一下网速还很流畅。</p>
<h2 id="步骤">步骤</h2><p>我大概写一下翻墙步骤，然后再贴出参考资料，不会详细介绍，一步步教学。参考资料里面的信息已经足够详细了。</p>
<ul>
<li>安装Firefox<br>这个不用说，自己去下载安装包。</li>
<li>在Firefox安装autoproxy插件<br>可以自行百度如何安装这个插件。</li>
<li>下载自由门<br>自由门软件可能需要翻墙。下载网址：<a href="http://leapb.zym9.net/" target="_blank" rel="external">http://leapb.zym9.net/</a></li>
<li>在autoproxy插件设置默认用 FreeGate 翻墙<br>如何设置可以在参考资料里面找到</li>
</ul>
<h2 id="参考资料">参考资料</h2><p>2015年火狐翻墙傻瓜式教程：<a href="http://www.firefoxfan.com/firefox-tutorial/firefox-autoproxy-goagent.html" target="_blank" rel="external">http://www.firefoxfan.com/firefox-tutorial/firefox-autoproxy-goagent.html</a><br>火狐+自由门快速进行翻墙: <a href="http://mozilla.com.cn/thread-56365-1-1.html" target="_blank" rel="external">http://mozilla.com.cn/thread-56365-1-1.html</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/工具使用/">工具使用</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/工具使用/">工具使用</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/14/firefox-autoproxy-freegate-over-wall/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/14/firefox-autoproxy-freegate-over-wall/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/12/php-7-file-operations/" title="php学习笔记7-文件操作" itemprop="url">php学习笔记7-文件操作</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-12T11:09:53.000Z" itemprop="datePublished"> 发表于 2015-05-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="文件（目录）操作">文件（目录）操作</h2><p>文件操作：对文件的增删改查。（文件夹也是文件）</p>
<p>为什么要使用文件操作？</p>
<ol>
<li>有一些数据：不经常被修改，但是又经常被使用，数据量小，使用文件来保存数据（配置文件，xml文件，session文件）</li>
<li>系统日志文件：把一些系统错误，保存到日志文件供管理员或者程序员去分析。</li>
</ol>
<h3 id="文件目录的操作">文件目录的操作</h3><p>对文件操作必须先找到对应的路径。</p>
<p>文件操作步骤</p>
<ol>
<li>得到文件路径对应的资源<br>opendir：打开一个目录，需要一个路径参数，返回一个资源</li>
<li>需要从资源里获取对应的数据<br>readdir：读取，从资源里读取一个对应文件，当前文件指针所指向的文件，将文件指针下移一位。返回当前文件的文件名字或者FALSE。可以显示的使用资源参数，也可以不提供，因为系统会向上自动寻找文件路径资源。<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打开路径，得到路径里的所有资源</span></span><br><span class="line"><span class="variable">$o</span> <span class="subst">=</span> opendir(<span class="variable">$dir</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//var_dump($o);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//读取文件，从路径资源中一个一个读取</span></span><br><span class="line">var_dump(readdir(<span class="variable">$o</span>));			<span class="comment">//.当前文件夹</span></span><br><span class="line">var_dump(readdir());			<span class="comment">//..上级目录</span></span><br><span class="line">var_dump(readdir());			<span class="comment">//demo01_dir.php</span></span><br><span class="line">var_dump(readdir());			<span class="comment">//son</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="目录相关函数">目录相关函数</h3><p>rewinddir：重置目录资源的指针，回到第一个文件（.文件）<br>closedir：释放目录资源<br>scandir：浏览器目录，把所有的文件都获得，并存放到一个数组返回</p>
<h3 id="遍历目录">遍历目录</h3><ol>
<li>获得路径资源</li>
<li>逐个的读取文件信息</li>
<li>关闭资源<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义目录</span></span><br><span class="line"><span class="variable">$dir</span> = <span class="string">'./test'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取目录资源</span></span><br><span class="line"><span class="variable">$o</span> = opendir(<span class="variable">$dir</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个计数器</span></span><br><span class="line"><span class="variable">$count</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历文件</span></span><br><span class="line"><span class="keyword">while</span>(<span class="variable">$filename</span> = readdir(<span class="variable">$o</span>))&#123;</span><br><span class="line">	<span class="comment">//第一步：执行readdir($o)</span></span><br><span class="line">	<span class="comment">//第二步：把执行结果赋值给$filename</span></span><br><span class="line">	<span class="comment">//第三步：while判断条件：将$filename自动转化成布尔类型</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//输出当前得到的文件</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$filename</span>,<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//计数器自加</span></span><br><span class="line">	++<span class="variable">$count</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出计数器</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"当前路径&#123;$dir&#125;下共有&#123;$count&#125;个文件。"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭资源</span></span><br><span class="line">closedir(<span class="variable">$o</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="文件相关函数">文件相关函数</h3><p>file_exists：判断文件是否存在。存在返回TRUE，不存在返回false<br>is_dir：判断给定的路径是否是一个路径，如果是路径返回TRUE，否则返回false<br>is_file：判断给定的路径是否是一个文件，如果是文件返回TRUE，否则返货false<br>mkdir：创建文件夹，不能创建同名文件夹（Linux下：必须保证当前文件夹有PHP所在组有权限进行写操作）<br>rmdir：删除文件夹<br>getcwd：获取当前操作目录<br>chdir：改变当前操作目录，代表进入到目标目录</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义几个变量</span></span><br><span class="line"><span class="variable">$dir1</span> = <span class="string">'./'</span>;</span><br><span class="line"><span class="variable">$dir2</span> = <span class="string">'../'</span>;</span><br><span class="line"><span class="variable">$dir3</span> = __DIR__;					<span class="comment">//当前文件的路径：绝对路径</span></span><br><span class="line"><span class="variable">$dir4</span> = __FILE__;					<span class="comment">//当前文件的路径：绝对路径，包含文件名</span></span><br><span class="line"><span class="variable">$dir5</span> = <span class="string">'./test'</span>;					<span class="comment">//没有该目录</span></span><br><span class="line"><span class="variable">$dir6</span> = <span class="string">'demo01_dir.php'</span>;			</span><br><span class="line"></span><br><span class="line"><span class="comment">//file_exists函数</span></span><br><span class="line">var_dump(file_exists(<span class="variable">$dir1</span>));		<span class="comment">//true</span></span><br><span class="line">var_dump(file_exists(<span class="variable">$dir2</span>));		<span class="comment">//true</span></span><br><span class="line">var_dump(file_exists(<span class="variable">$dir3</span>));		<span class="comment">//true</span></span><br><span class="line">var_dump(file_exists(<span class="variable">$dir4</span>));		<span class="comment">//true</span></span><br><span class="line">var_dump(file_exists(<span class="variable">$dir5</span>));		<span class="comment">//false</span></span><br><span class="line">var_dump(file_exists(<span class="variable">$dir6</span>));		<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//is_dir函数</span></span><br><span class="line">var_dump(is_dir(<span class="variable">$dir1</span>));			<span class="comment">//true</span></span><br><span class="line">var_dump(is_dir(<span class="variable">$dir2</span>));			<span class="comment">//true</span></span><br><span class="line">var_dump(is_dir(<span class="variable">$dir3</span>));			<span class="comment">//true</span></span><br><span class="line">var_dump(is_dir(<span class="variable">$dir4</span>));			<span class="comment">//false</span></span><br><span class="line">var_dump(is_dir(<span class="variable">$dir5</span>));			<span class="comment">//false</span></span><br><span class="line">var_dump(is_dir(<span class="variable">$dir6</span>));			<span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//is_file函数</span></span><br><span class="line">var_dump(is_file(<span class="variable">$dir1</span>));			<span class="comment">//false</span></span><br><span class="line">var_dump(is_file(<span class="variable">$dir2</span>));			<span class="comment">//false</span></span><br><span class="line">var_dump(is_file(<span class="variable">$dir3</span>));			<span class="comment">//false</span></span><br><span class="line">var_dump(is_file(<span class="variable">$dir4</span>));			<span class="comment">//true</span></span><br><span class="line">var_dump(is_file(<span class="variable">$dir5</span>));			<span class="comment">//false</span></span><br><span class="line">var_dump(is_file(<span class="variable">$dir6</span>));			<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">echo <span class="string">'&lt;hr/&gt;'</span>;</span><br><span class="line"><span class="comment">//mkdir创建文件夹</span></span><br><span class="line">var_dump(<span class="variable">@mkdir</span>(<span class="string">'parent'</span>));			<span class="comment">//true</span></span><br><span class="line">var_dump(<span class="variable">@mkdir</span>(<span class="string">'parent'</span>));			<span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//rmdir删除文件夹</span></span><br><span class="line">var_dump(rmdir(<span class="string">'parent'</span>));			<span class="comment">//true</span></span><br><span class="line">var_dump(<span class="variable">@rmdir</span>(<span class="string">'parent'</span>));			<span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//getcwd获取当前操作路径</span></span><br><span class="line">var_dump(getcwd());					<span class="comment">//20140817</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//chdir改变工作目录</span></span><br><span class="line">var_dump(<span class="variable">@chdir</span>(<span class="variable">$dir5</span>));			<span class="comment">//false,文件目录不存在</span></span><br><span class="line">var_dump(<span class="variable">@chdir</span>(<span class="string">'son'</span>));			<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//getcwd获取工作路径</span></span><br><span class="line">var_dump(getcwd());					<span class="comment">//20140817/son</span></span><br></pre></td></tr></table></figure>
<h3 id="遍历所有文件夹及子目录">遍历所有文件夹及子目录</h3><ol>
<li>得到一个路径</li>
<li>获得路径资源</li>
<li>获取指针所指向文件名</li>
<li>判断当前文件是否是一个路径<br>a)    如果是路径：进入到子目录（改变工作路径）<br>b)    如果是文件：直接输出</li>
<li>关闭资源</li>
</ol>
<h2 id="递归">递归</h2><p>在函数内部调用函数本身。<br>函数用来解决某一类问题，在函数的内部又碰到了与之前碰到的一样的问题，接下来调用函数本身来解决该子问题。</p>
<p>二分法找值问题的非递归解法以及递归解法<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//非递归解法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">binary_search_wihle</span><span class="params">(<span class="variable">$num</span>,<span class="variable">$arr</span>)</span></span>&#123;</span><br><span class="line">	<span class="variable">$start</span> = <span class="number">0</span>;</span><br><span class="line">	<span class="variable">$end</span> = count(<span class="variable">$arr</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="variable">$start</span> &lt; <span class="variable">$end</span>) &#123;</span><br><span class="line">		<span class="variable">$middle</span> = floor((<span class="variable">$start</span>+<span class="variable">$end</span>)/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$num</span> == <span class="variable">$arr</span>[<span class="variable">$middle</span>])&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="variable">$middle</span> + <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">elseif</span> (<span class="variable">$num</span> &lt; <span class="variable">$arr</span>[<span class="variable">$middle</span>]) &#123;</span><br><span class="line">			<span class="variable">$end</span> = <span class="variable">$middle</span> - <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="variable">$start</span> = <span class="variable">$middle</span> + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//递归解法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">binary_search_recursion</span><span class="params">(<span class="variable">$num</span>, <span class="variable">$arr</span>, <span class="variable">$start</span>, <span class="variable">$end</span>)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="variable">$start</span> &gt;= <span class="variable">$end</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="variable">$middle</span> = floor((<span class="variable">$start</span>+<span class="variable">$end</span>)/<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(<span class="variable">$num</span> == <span class="variable">$arr</span>[<span class="variable">$middle</span>])&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable">$middle</span> + <span class="number">1</span>;</span><br><span class="line">	&#125;<span class="keyword">elseif</span> (<span class="variable">$num</span> &lt; <span class="variable">$arr</span>[<span class="variable">$middle</span>]) &#123;</span><br><span class="line">		<span class="variable">$end</span> = <span class="variable">$middle</span> - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">return</span> binary_search_recursion(<span class="variable">$num</span>, <span class="variable">$arr</span>, <span class="variable">$start</span>, <span class="variable">$end</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="variable">$start</span> = <span class="variable">$middle</span> + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">return</span> binary_search_recursion(<span class="variable">$num</span>, <span class="variable">$arr</span>, <span class="variable">$start</span>, <span class="variable">$end</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$arr</span> = range(<span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line"><span class="variable">$length</span> = count(<span class="variable">$arr</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"arr[0] == $arr[0] &lt;br/&gt;"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"length = $length &lt;br/&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> binary_search_wihle(<span class="number">100</span>,<span class="variable">$arr</span>).<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> var_dump( binary_search_wihle(<span class="number">101</span>,<span class="variable">$arr</span>) ).<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> var_dump( binary_search_wihle(<span class="number">0</span>,<span class="variable">$arr</span>) ).<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> binary_search_wihle(<span class="number">1</span>,<span class="variable">$arr</span>).<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> var_dump( binary_search_recursion(<span class="number">100</span>,<span class="variable">$arr</span>,<span class="number">0</span>,<span class="variable">$length</span>) ).<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> var_dump( binary_search_recursion(<span class="number">101</span>,<span class="variable">$arr</span>,<span class="number">0</span>,<span class="variable">$length</span>) ).<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> var_dump( binary_search_recursion(<span class="number">0</span>,<span class="variable">$arr</span>,<span class="number">0</span>,<span class="variable">$length</span>) ).<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> binary_search_recursion(<span class="number">1</span>,<span class="variable">$arr</span>,<span class="number">0</span>,<span class="variable">$length</span>).<span class="string">'&lt;br/&gt;'</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="文件操作">文件操作</h2><p>对文件内容的增删改查。</p>
<p>在PHP4以后，PHP提供了非常简单的函数来操作文件内容</p>
<ul>
<li><p>file_get_contents()：获取文件的全部内容<br>file_get_contents不但能读取本地文件，还可以通过http协议去访问互联网上的文件</p>
</li>
<li><p>file_put_contents()：向某个文件写入内容<br>注意：</p>
</li>
</ul>
<ol>
<li>file_put_contents能够将内容写入到文件中</li>
<li>如果文件不存在，则会新建一个对应的文件</li>
<li>file_put_contents默认的会覆盖原来文件的内容进行写入<br>file_put_contents第三个参数用来设定是否覆盖原来的文件内容<br>FILE_USE_INCLUDE_PATH：表示会覆盖原来的数据<br>FILE_APPEND：在后面追加数据</li>
</ol>
<ul>
<li>file：把整个文件读入一个数组中，返回一个数组（数组的每一个元素都是文件中的一行数据）</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//PHP5文件操作</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">'../20140816/header.php'</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//从文件中读取文件内容</span></span><br><span class="line"><span class="comment">//需要一个参数：文件路径</span></span><br><span class="line"><span class="variable">$str</span> = file_get_contents(<span class="string">'test.php'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//echo $str;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将该字符串写入到当前目录下的a.txt文件下</span></span><br><span class="line">file_put_contents(<span class="string">'a.txt'</span>,<span class="variable">$str</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//重新写入内容</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">'hello world'</span>;</span><br><span class="line">file_put_contents(<span class="string">'a.txt'</span>,<span class="variable">$str</span>,FILE_APPEND);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//读取</span></span><br><span class="line"><span class="variable">$str</span> = file_get_contents(<span class="string">'http://localhost/20140817/demo01_dir.php'</span>);</span><br><span class="line"><span class="comment">//echo $str;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//file函数</span></span><br><span class="line"><span class="variable">$arr</span> = file(<span class="string">'test.php'</span>);</span><br><span class="line">var_dump(<span class="variable">$arr</span>);</span><br></pre></td></tr></table></figure>
<p>PHP4以前的文件操作方式。</p>
<ul>
<li>fopen：打开一个文件，返回一个资源</li>
<li>fgetc：c代表charcater，一次获取一个字符，指针下移一位</li>
<li>fgets：s代表string，一次获取一行（要么获取指定长度，要么获取一行）</li>
<li>fread：读取指定长度是数据</li>
<li>fputs：就是fwrite的替身</li>
<li>fwrite：往文件里写入内容<br>写内容的时候，会覆盖原来位置的内容，内容会被重写</li>
<li>fclose：关闭文件资源</li>
<li>fseek：重置指针的位置，需要用户自己指定位置</li>
</ul>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取文件资源</span></span><br><span class="line"><span class="variable">$f</span> = <span class="keyword">fopen</span>(<span class="string">'a.txt'</span>,<span class="string">'r+'</span>);		<span class="comment">//只读打开文件</span></span><br><span class="line"><span class="comment">//var_dump($f);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//读取数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取字符</span></span><br><span class="line">var_dump(fgetc(<span class="variable">$f</span>));			<span class="comment">//&lt;</span></span><br><span class="line">var_dump(fgetc(<span class="variable">$f</span>));			<span class="comment">//?</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取字符串</span></span><br><span class="line"><span class="comment">//var_dump(fgets($f,2));			//p</span></span><br><span class="line"><span class="comment">//var_dump(strlen(fgets($f,1024)));		//php\r\n 5个长度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//fread读取数据</span></span><br><span class="line"><span class="comment">//var_dump(fread($f,1024));		//读指定长度数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//写入内容</span></span><br><span class="line"><span class="comment">//var_dump(fwrite($f,'hello world'));		//无法写入，因为是只读模式打开</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//指定指针的位置</span></span><br><span class="line">fseek(<span class="variable">$f</span>,<span class="number">0</span>);					<span class="comment">//指针回到文件的第一个位置</span></span><br><span class="line"><span class="comment">// fwrite($f,"&lt;?php            \r\n");</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭文件资源</span></span><br><span class="line"><span class="keyword">fclose</span>(<span class="variable">$f</span>);</span><br></pre></td></tr></table></figure>
<h3 id="文件操作相关函数">文件操作相关函数</h3><p>copy：拷贝，会保存原文件<br>unlink：删除文件<br>rename：重命名文件<br>filemtime：m代表modify，修改的意思，获取文件最后被修改的时间<br>filesize：获取文件的长度<br>fileperms：获取文件的权限（主要针对Linux），返回是一个八进制结果<br><figure class="highlight rsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重命名</span></span><br><span class="line"><span class="comment">//rename('a.txt','b.txt');</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取文件最后修改时间</span></span><br><span class="line">var_dump(filemtime(<span class="string">'b.txt'</span>));		<span class="comment">//文件最后修改的时间戳</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取文件大小</span></span><br><span class="line">var_dump(filesize(<span class="string">'b.txt'</span>));		<span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取文件权限</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%o"</span>,fileperms(<span class="string">'b.txt'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除文件</span></span><br><span class="line">unlink(<span class="string">'b.txt'</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="文件下载">文件下载</h3><p>文件下载分为两种方式</p>
<ul>
<li><p>html的a标签实现：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"./a.zip"</span>&gt;</span>美女<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  a标签实现下载的缺点：</p>
<ol>
<li>导致服务器会自动解析相关文件（如果服务器能够识别）</li>
<li>路径是文件在服务器存在的真实路径，所以导致不安全</li>
</ol>
</li>
<li><p>PHP实现下载<br>header(“Content-type: application/octet-stream”)：当前PHP输出给浏览器的数据是流式文件，浏览器不要解析（其实就是下载的意思）<br>header(“Content-Disposition: attachment; filename=filename”)：对文件进行伪装，文件变成一个普通的附件并进行重命名</p>
<p>  PHP下载原理</p>
<pre><code><span class="bullet">1. </span>通过header设置告诉浏览器，接收到内容之后不要解析，应该当做附件处理
<span class="bullet">2. </span>输出对应的数据即可。
</code></pre><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//PHP实现文件下载</span></span><br><span class="line"><span class="keyword">header</span>(<span class="string">"Content-type: application/octet-stream"</span>);</span><br><span class="line"><span class="keyword">header</span>(<span class="string">"Content-Disposition: attachment; filename=beautifulgirl.jpg"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出数据</span></span><br><span class="line"><span class="comment">//echo file_get_contents('test.php');</span></span><br><span class="line">echo file_get_contents(<span class="string">'programmer.gif'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//原理</span></span><br><span class="line"><span class="comment">//一次性读入所有内容</span></span><br><span class="line"><span class="comment">//fopen+fread+echo，循环获取输出</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="统计流量（人数，访问次数，用户IP）示例">统计流量（人数，访问次数，用户IP）示例</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">header(<span class="string">'Content-type:text/html;charset=utf-8'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//统计流量（人数，访问次数，用户IP）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//假设用户访问，得到IP地址</span></span><br><span class="line"><span class="variable">$remote</span> = <span class="variable">$_SERVER</span>[<span class="string">'REMOTE_ADDR'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//拼凑要写入到文件的数据：ip|2014-8-19 10:24:15</span></span><br><span class="line"><span class="variable">$write</span> = <span class="variable">$remote</span> . <span class="string">'|'</span> . date(<span class="string">'Y-m-d H:i:s'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出信息：挡墙网页已经被第几次访问，当前用户是第几次来访问</span></span><br><span class="line"><span class="variable">$str</span> = file_get_contents(<span class="string">'record.txt'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个变量保存当前用户的点击次数</span></span><br><span class="line"><span class="variable">$clickcount</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断当前有没有记录访问信息</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$str</span>)&#123;</span><br><span class="line">	<span class="comment">//有数据</span></span><br><span class="line">	<span class="comment">//以行区分当前文件有多少行</span></span><br><span class="line">	<span class="variable">$rows</span> = explode(<span class="string">"\r\n"</span>,<span class="variable">$str</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//获取已经访问过的用户的数量</span></span><br><span class="line">	<span class="variable">$count</span> = count(<span class="variable">$rows</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//判断当前用户是第几次访问该网页</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">foreach</span>(<span class="variable">$rows</span> <span class="keyword">as</span> <span class="variable">$value</span>)&#123;</span><br><span class="line">		<span class="comment">//value代表一个访问记录</span></span><br><span class="line">		<span class="variable">$ip</span> = explode(<span class="string">"|"</span>,<span class="variable">$value</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//判读是不是当前用户查看的</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$ip</span>[<span class="number">0</span>] == <span class="variable">$remote</span>)&#123;</span><br><span class="line">			<span class="comment">//以前访问的记录与当前用户的ip相同</span></span><br><span class="line">			<span class="variable">$clickcount</span>++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//修改write</span></span><br><span class="line">	<span class="variable">$write</span> = <span class="string">"\r\n"</span> . <span class="variable">$write</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="comment">//当前用户是第一个来访问该网页</span></span><br><span class="line">	<span class="variable">$count</span> = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//写入数据</span></span><br><span class="line">file_put_contents(<span class="string">'record.txt'</span>,<span class="variable">$write</span>,FILE_APPEND);</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出信息</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"当前网页已经是第&#123;$count&#125;次被访问&lt;br/&gt;"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"您是第&#123;$clickcount&#125;次来访问该网页&lt;br/&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//192.168.3.100/20140819/homework_record.php</span></span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/PHP/">PHP</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PHP/">PHP</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/12/php-7-file-operations/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/12/php-7-file-operations/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/12/php-6-data-transfer/" title="php学习笔记6-数据传输基础" itemprop="url">php学习笔记6-数据传输基础</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-12T05:37:15.000Z" itemprop="datePublished"> 发表于 2015-05-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="浏览器传值">浏览器传值</h2><p>浏览器如何给服务器传输数据？</p>
<h3 id="表单传值">表单传值</h3><p>增加一对form标签，将一些需要提交的数据，在form使用表单元素（input，select，textarea）</p>
<ul>
<li><p>post传值：数据以post形式传输</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">form</span> <span class="attribute">method</span>=<span class="value">”POST”</span> <span class="attribute">action</span>=<span class="value">”?”</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">”text”</span> <span class="attribute">name</span>=<span class="value">”name”</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">”text”</span> <span class="attribute">name</span>=<span class="value">”age”</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">”submit”</span> <span class="attribute">value</span>=<span class="value">”提交”</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>get传值：将数据绑定到URL（名字=值）</p>
</li>
</ul>
<h3 id="URL传值">URL传值</h3><p>URL后增加参数<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.itcast.cn/<span class="built_in">index</span>.php?<span class="keyword">name</span>=张三&amp;age=<span class="number">18</span></span><br></pre></td></tr></table></figure></p>
<h2 id="GET和POST的区别">GET和POST的区别</h2><ol>
<li>表单对应的提交方式区别：METHOD=“GET/POST”</li>
<li>数据提交过程区别：GET将所有的数据拼接到URL（name=值&amp;name2=值2…），POST提交的数据是看不到的</li>
<li>GET方式不安全，POST方式相对安全</li>
<li>GET方式传输数据，数据量小（2KB），post方式基本无限制（8M）</li>
<li>GET提交数据效率比POST要高</li>
</ol>
<p>如何选择表单提交方式？</p>
<ol>
<li>如果数据安全性要求高：使用post提交</li>
<li>如果数据量比较大，使用post提交</li>
</ol>
<h2 id="checkbox提交数据">checkbox提交数据</h2><p>因为PHP会将中括号当做数组的元素来对待，所以只需要在浏览器传递数据的过程中，给name增加一个中括号，让PHP在解析的时候，当做数组处理，从而将多个checkbox的值保存到一个数组中。<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="variable">type=</span><span class="string">"checkbox"</span> <span class="variable">name=</span><span class="string">"hobby[]"</span> <span class="variable">value=</span><span class="string">"1"</span>&gt;篮球&amp;nbsp;&amp;nbsp;</span><br><span class="line">&lt;input <span class="variable">type=</span><span class="string">"checkbox"</span> <span class="variable">name=</span><span class="string">"hobby[]"</span> <span class="variable">value=</span><span class="string">"2"</span>&gt;足球&amp;nbsp;&amp;nbsp;</span><br><span class="line">&lt;input <span class="variable">type=</span><span class="string">"checkbox"</span> <span class="variable">name=</span><span class="string">"hobby[]"</span> <span class="variable">value=</span><span class="string">"3"</span>&gt;羽毛球&amp;nbsp;&amp;nbsp;</span><br><span class="line">&lt;input <span class="variable">type=</span><span class="string">"checkbox"</span> <span class="variable">name=</span><span class="string">"hobby[]"</span> <span class="variable">value=</span><span class="string">"4"</span>&gt;乒乓球&amp;nbsp;&amp;nbsp;</span><br><span class="line">&lt;input <span class="variable">type=</span><span class="string">"checkbox"</span> <span class="variable">name=</span><span class="string">"hobby[]"</span> <span class="variable">value=</span><span class="string">"5"</span>&gt;网球&amp;nbsp;&amp;nbsp;</span><br><span class="line">&lt;input <span class="variable">type=</span><span class="string">"checkbox"</span> <span class="variable">name=</span><span class="string">"hobby[]"</span> <span class="variable">checked=</span><span class="string">"checked"</span> <span class="variable">value=</span><span class="string">"6"</span>&gt;台球&amp;nbsp;&amp;nbsp;</span><br></pre></td></tr></table></figure></p>
<p>因为checkbox往往是多选，PHP最终接收的数据会形成一个数组，但是数组不能存储，需要转化成字符串才能存储。所以，将爱好转换成字符串保存到数据库。<br>implode：将数组元素变成字符串<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接收数据</span></span><br><span class="line"><span class="variable">$hobby</span> = <span class="variable">$_POST</span>[<span class="string">'hobby'</span>];		<span class="comment">//array</span></span><br><span class="line">var_dump(<span class="variable">$hobby</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//将数据变成字符串</span></span><br><span class="line"><span class="variable">$hobby</span> = implode(<span class="string">'|'</span>,<span class="variable">$hobby</span>);		<span class="comment">//string</span></span><br><span class="line">var_dump(<span class="variable">$hobby</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="数据传输方式">数据传输方式</h2><ul>
<li>字符数据传输方式<br>普通的数据传输都是基于此方式。</li>
<li>二进制格式传输<br>文件的传输：图片，普通文件</li>
</ul>
<h2 id="文件上传">文件上传</h2><p>概念：从一台电脑上，将文件传输到另外一台电脑上。<br>web：从客户端机器（用户）上传到服务端机器。</p>
<p>get或者post方式不能直接进行二进制文件的传输。get是不能传输二进制文件，post需要搭配一个属性才能进行文件传输。</p>
<ul>
<li><p>文件上传必须要在服务器端先开启文件上传的功能,在php.ini修改配置项：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">; 是否允许文件上传，默认是开启</span><br><span class="line">file_uploads = <span class="constant">On</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">; 文件上传到服务器后产生的临时文件路径，如果没有指定，那么使用系统临时目录一般会修改配置文件，指定临时目录。我只改这项。</span><br><span class="line">upload_tmp_dir = <span class="constant">F</span><span class="symbol">:/server/tmp</span></span><br><span class="line"></span><br><span class="line">; 允许上传单个文件最大值</span><br><span class="line">upload_max_filesize = <span class="number">2</span>M</span><br><span class="line"></span><br><span class="line">；一次上传文件允许的最大数目</span><br><span class="line">max_file_uploads = <span class="number">20</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>post默认提交字符流数据，不能提交二进制数据，如果需要提交二进制数据，需要给表单额外增加一个属性：enctype=”multipart/form-data”</p>
</li>
<li><p>文件上传流程：<br><img src="/image/php_learn/upload.jpg" alt="upload上传流程图"> </p>
</li>
<li><p>验证文件合法性</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//文件上传错误判断</span></span><br><span class="line"><span class="keyword">switch</span>(<span class="variable">$_FILES</span>[<span class="string">'file'</span>][<span class="string">'error'</span>])&#123;</span><br><span class="line">	<span class="comment">//判断</span></span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">		<span class="comment">//正确</span></span><br><span class="line">		<span class="comment">//两个参数：目标文件，目标路径</span></span><br><span class="line">		move_uploaded_file(<span class="variable">$_FILES</span>[<span class="string">'file'</span>][<span class="string">'tmp_name'</span>],<span class="string">'./uploads/'</span> . <span class="variable">$_FILES</span>[<span class="string">'file'</span>][<span class="string">'name'</span>]);</span><br><span class="line">		<span class="comment">//						d:/server/tmp/php9286.tmp,./uploads/programmer.gif</span></span><br><span class="line">		<span class="comment">//上传成功</span></span><br><span class="line">		<span class="keyword">echo</span> <span class="string">'上传成功！'</span>;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">		header(<span class="string">'Refresh:3;url=demo05_upload.html'</span>);</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">'文件大小超过服务器的限制！'</span>;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">		header(<span class="string">'Refresh:3;url=demo05_upload.html'</span>);</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">'文件只有部分上传成功！'</span>;</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">		<span class="comment">//还有很多，要做到完整，必须对每一个错误代码都进行处理</span></span><br><span class="line">	<span class="keyword">default</span>:</span><br><span class="line">		header(<span class="string">'Refresh:3;url=demo05_upload.html'</span>);</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">'文件上传失败！'</span>;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>移动临时文件<br>PHP提供了两个函数来实现文件的移动<br>move_uploaded_file：将文件直接移动到目标路径，不会保留原文件<br>copy：将文件复制到目标路径，会保留原文件</p>
</li>
<li><p>封装上传文件函数<br>ini_get：通过配置项，获取php.ini中对应配置项的值</p>
</li>
</ul>
<p>两个文件：<br>demo_upload.php用来接受请求，以及调用封装的函数<br>upload.php对上传的函数进行封装</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//demo_upload.php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//上传文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.	加载Upload文件</span></span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'header.php'</span>;</span><br><span class="line"><span class="keyword">include_once</span> <span class="string">'upload.php'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.	先对外部数据进行判断</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">empty</span>(<span class="variable">$_FILES</span>))&#123;</span><br><span class="line">	<span class="keyword">die</span>(<span class="string">'没有上传文件'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.	调用上传函数进行上传</span></span><br><span class="line"><span class="variable">$res</span> = upload(<span class="variable">$_FILES</span>[<span class="string">'file'</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.	判断结果</span></span><br><span class="line"><span class="keyword">if</span>(is_array(<span class="variable">$res</span>))&#123;</span><br><span class="line">	<span class="comment">//出错了</span></span><br><span class="line">	<span class="keyword">exit</span>(<span class="variable">$res</span>[<span class="number">1</span>]);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	<span class="comment">//成功了</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'文件上传成功，文件路径为：'</span> . <span class="variable">$res</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="preprocessor">&lt;?php</span></span><br><span class="line">	<span class="comment">//upload.php</span></span><br><span class="line">	<span class="comment">//上传文件函数</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span><br><span class="line">	 * 文件上传</span><br><span class="line">	 *<span class="phpdoc"> @param</span>1 array $file，上传的文件的信息，例$_FILES['file']</span><br><span class="line">	 *<span class="phpdoc"> @param</span>2 array $files，允许上传文件的后缀名，给定默认值，例array('gif','png','jpeg','jpg') </span><br><span class="line">	 * </span><br><span class="line">	 *<span class="phpdoc"> @return</span> miexd，成功返回文件的路径，如果失败，返回数组，第一个值是FALSE，第二个是错误信息</span><br><span class="line">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">upload</span><span class="params">(<span class="variable">$file</span>,<span class="variable">$allow</span> = array<span class="params">(<span class="string">'gif'</span>,<span class="string">'png'</span>,<span class="string">'jpg'</span>,<span class="string">'jpeg'</span>)</span>)</span></span>&#123;</span><br><span class="line">		<span class="comment">//1.	对$file进行判断，如果不是数组，就不存在上传文件</span></span><br><span class="line">		<span class="keyword">if</span>(!is_array(<span class="variable">$file</span>))&#123;</span><br><span class="line">			<span class="comment">//不是数组</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">array</span>(<span class="keyword">false</span>,<span class="string">'当前不是上传的文件信息！'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//2.	文件是否上传成功</span></span><br><span class="line">		<span class="comment">//定义一个错误字符串</span></span><br><span class="line">		<span class="variable">$errorinfo</span> = <span class="string">''</span>;</span><br><span class="line">		<span class="keyword">switch</span>(<span class="variable">$file</span>[<span class="string">'error'</span>])&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">				<span class="variable">$errorinfo</span> = <span class="string">'文件超过服务器限制！允许上传的文件的最大值为：'</span> . ini_get(<span class="string">'upload_max_filesize'</span>);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">				<span class="variable">$errorinfo</span> = <span class="string">'文件超过浏览器允许大小！'</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">				<span class="variable">$errorinfo</span> = <span class="string">'文件只上传成功一部分！'</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">				<span class="variable">$errorinfo</span> = <span class="string">'没有选中要上传的文件！'</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">				<span class="variable">$errorinfo</span> = <span class="string">'找不到服务器的临时目录！'</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">				<span class="variable">$errorinfo</span> = <span class="string">'文件上传路径不可写！'</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//判断errorinfo</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$errorinfo</span>)&#123;</span><br><span class="line">			<span class="comment">//错误信息存在</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">array</span>(<span class="keyword">FALSE</span>,<span class="variable">$errorinfo</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//3.	文件类型判断</span></span><br><span class="line">		<span class="comment">//获取文件后缀名</span></span><br><span class="line">		<span class="variable">$extension</span> = getExtension(<span class="variable">$file</span>[<span class="string">'name'</span>]);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//3.1	判断文件后缀是否存在</span></span><br><span class="line">		<span class="keyword">if</span>(!<span class="variable">$extension</span>)&#123;</span><br><span class="line">			<span class="comment">//文件后缀名不存在</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">array</span>(<span class="keyword">false</span>,<span class="string">'当前文件没有后缀名！'</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//3.2	当前文件是否允许上传</span></span><br><span class="line">		<span class="keyword">if</span>(!in_array(<span class="variable">$extension</span>,<span class="variable">$allow</span>))&#123;</span><br><span class="line">			<span class="comment">//文件后缀不允许</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">array</span>(<span class="keyword">false</span>,<span class="string">'当前文件类型不允许上传，允许上传的类型有：'</span> . implode(<span class="string">','</span>,<span class="variable">$allow</span>));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//4.	上传文件</span></span><br><span class="line">		<span class="comment">//4.1	重命名文件：获取一个随机的文件名字</span></span><br><span class="line">		<span class="variable">$filename</span> = getRandomFilename();</span><br><span class="line"></span><br><span class="line">		<span class="comment">//拼凑文件全名</span></span><br><span class="line">		<span class="variable">$filename</span> .= <span class="string">'.'</span> . <span class="variable">$extension</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//4.2	移动文件</span></span><br><span class="line">		<span class="keyword">if</span>(!@move_uploaded_file(<span class="variable">$file</span>[<span class="string">'tmp_name'</span>],<span class="string">'./uploads/'</span> . <span class="variable">$filename</span>))&#123;</span><br><span class="line">			<span class="comment">//文件移动失败</span></span><br><span class="line">			<span class="comment">//将错误信息写入到错误日志</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">array</span>(<span class="keyword">false</span>,<span class="string">'文件上传失败！'</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//4.3	文件上传成功</span></span><br><span class="line">		<span class="keyword">return</span>  <span class="string">'./upload/'</span> . <span class="variable">$filename</span>;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span><br><span class="line">	 * 获取文件后缀名</span><br><span class="line">	 *<span class="phpdoc"> @param</span>1 string $filename，文件路径</span><br><span class="line">	 *<span class="phpdoc"> @return</span> mixed，如果成功返回文件后缀名，如果失败返回FALSE</span><br><span class="line">	 */</span></span><br><span class="line">	 <span class="function"><span class="keyword">function</span> <span class="title">getExtension</span><span class="params">(<span class="variable">$filename</span>)</span></span>&#123;</span><br><span class="line">		<span class="comment">//获取文件后缀名</span></span><br><span class="line">		<span class="keyword">if</span>(strrpos(<span class="variable">$filename</span>,<span class="string">'.'</span>))&#123;</span><br><span class="line">			<span class="keyword">return</span> substr(<span class="variable">$filename</span>,strrpos(<span class="variable">$filename</span>,<span class="string">'.'</span>) + <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//如果没有.</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">FALSE</span>;</span><br><span class="line">	 &#125;</span><br><span class="line"></span><br><span class="line">	 <span class="comment">/*</span><br><span class="line">	  * 获取一个随机的名字</span><br><span class="line">	  *<span class="phpdoc"> @return</span> string $filename，返回一个随机字符串</span><br><span class="line">	  */</span></span><br><span class="line">	  <span class="function"><span class="keyword">function</span> <span class="title">getRandomFilename</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="comment">//随机文件名规则：年月日时分秒+随机字符串（6）</span></span><br><span class="line">		<span class="variable">$filename</span> = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//获取年月日时分秒</span></span><br><span class="line">		<span class="variable">$filename</span> .= date(<span class="string">'YmdHis'</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//获取一个随机字符串</span></span><br><span class="line">		<span class="variable">$str</span> = <span class="string">'abcdefghijklmnopqrstuvwxyz'</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>;<span class="variable">$i</span> &lt; <span class="number">6</span>;<span class="variable">$i</span>++)&#123;</span><br><span class="line">			<span class="variable">$filename</span> .= <span class="variable">$str</span>[mt_rand(<span class="number">0</span>,<span class="number">25</span>)];</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//返回文件名</span></span><br><span class="line">		<span class="keyword">return</span> <span class="variable">$filename</span>;</span><br><span class="line">	  &#125;</span></span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/PHP/">PHP</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PHP/">PHP</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/12/php-6-data-transfer/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/12/php-6-data-transfer/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/11/linux-kernel-1-disassembling-a-simple-c-program/" title="Linux内核分析1-反汇编一个简单的c程序" itemprop="url">Linux内核分析1-反汇编一个简单的c程序</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-11T05:09:20.000Z" itemprop="datePublished"> 发表于 2015-05-11</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>王志刚，学习笔记，《Linux内核分析》MOOC 课程 <a href="http://mooc.study.163.com/course/USTC-1000029000" target="_blank" rel="external">http://mooc.study.163.com/course/USTC-1000029000</a></p>
<h2 id="编辑代码,编译">编辑代码,编译</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">g</span><span class="params">(<span class="keyword">int</span> x)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> x)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> g(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> f(<span class="number">20</span>) + <span class="number">8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译为汇编代码<br>注意：64位Linux虚拟机环境下适用，32位Linux环境可能会稍有不同<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc –S –o main<span class="class">.s</span> main<span class="class">.c</span> -m32</span><br></pre></td></tr></table></figure></p>
<p>编译后的 main.s 如下(去除一些以.开头的字段冗余信息)<br><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="label">g:</span></span><br><span class="line">	pushl	%<span class="literal">ebp</span></span><br><span class="line">	movl	%<span class="literal">esp</span>, %<span class="literal">ebp</span></span><br><span class="line">	movl	<span class="number">8</span>(%<span class="literal">ebp</span>), %<span class="number">eax</span></span><br><span class="line">	addl	<span class="number">$10</span>, %<span class="number">eax</span></span><br><span class="line">	popl	%<span class="literal">ebp</span></span><br><span class="line">	<span class="keyword">ret</span></span><br><span class="line"><span class="label">f:</span></span><br><span class="line">	pushl	%<span class="literal">ebp</span></span><br><span class="line">	movl	%<span class="literal">esp</span>, %<span class="literal">ebp</span></span><br><span class="line">	subl	<span class="number">$4</span>, %<span class="literal">esp</span></span><br><span class="line">	movl	<span class="number">8</span>(%<span class="literal">ebp</span>), %<span class="number">eax</span></span><br><span class="line">	movl	%<span class="number">eax</span>, (%<span class="literal">esp</span>)</span><br><span class="line">	<span class="keyword">call</span>	g</span><br><span class="line">	<span class="keyword">leave</span></span><br><span class="line">	<span class="keyword">ret</span></span><br><span class="line"><span class="label">main:</span></span><br><span class="line">	pushl	%<span class="literal">ebp</span></span><br><span class="line">	movl	%<span class="literal">esp</span>, %<span class="literal">ebp</span></span><br><span class="line">	subl	<span class="number">$4</span>, %<span class="literal">esp</span></span><br><span class="line">	movl	<span class="number">$20</span>, (%<span class="literal">esp</span>)</span><br><span class="line">	<span class="keyword">call</span>	f</span><br><span class="line">	addl	<span class="number">$8</span>, %<span class="number">eax</span></span><br><span class="line">	<span class="keyword">leave</span></span><br><span class="line">	<span class="keyword">ret</span></span><br></pre></td></tr></table></figure></p>
<h2 id="汇编过程分析gif">汇编过程分析gif</h2><p><img src="/image/linux/linux_simple_c.gif" alt=""> </p>
<h2 id="汇编基本指令和操作">汇编基本指令和操作</h2><ul>
<li>x86中，堆栈的增长方向是从高地址到低地址的。即执行 Push 指令时 ESP 先减小在存入相应的值。</li>
<li>Linux下的汇编是AT&amp;T的汇编与INTEL汇编有一些区别，最显而易见的就是MOV指令的方向 AT&amp;T中 mov a b 是 a的值赋给b，而INTEL的相反。</li>
</ul>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">; b,w,l,q分别代表<span class="number">8</span>位，<span class="number">16</span>位，<span class="number">32</span>位，<span class="number">64</span>位</span><br><span class="line">movl <span class="variable">%eax</span>,<span class="variable">%edx</span>      ;edx = eax         			register mode</span><br><span class="line">movl <span class="variable">$0</span>x123,<span class="variable">%edx</span>    ;edx = <span class="number">0x123</span>       			immediate</span><br><span class="line">movl <span class="number">0x123</span>,<span class="variable">%edx</span>		;edx = <span class="variable">*(</span>int32_t<span class="variable">*)</span><span class="number">0x123</span> 	direct</span><br><span class="line">movl (<span class="variable">%ebx</span>),<span class="variable">%edx</span>    ;edx = <span class="variable">*(</span>int32_t<span class="variable">*)</span>ebx   	indirect</span><br><span class="line">movl <span class="number">4</span>(<span class="variable">%ebx</span>),<span class="variable">%edx</span>   ;edx = <span class="variable">*(</span>int32_t<span class="variable">*)</span>(ebx+<span class="number">4</span>)   displaced</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pushl <span class="variable">%eax</span> 	</span><br><span class="line">   subl <span class="variable">$4</span>,<span class="variable">%esp</span></span><br><span class="line">   movl <span class="variable">%eax</span>,(<span class="variable">%esp</span>)</span><br><span class="line"></span><br><span class="line">popl <span class="variable">%eax</span></span><br><span class="line">   movl (<span class="variable">%esp</span>),<span class="variable">%eax</span></span><br><span class="line">   movl <span class="variable">$4</span>,<span class="variable">%esp</span></span><br><span class="line"></span><br><span class="line">call <span class="number">0x12345</span></span><br><span class="line">   pushl <span class="variable">%eip</span> *</span><br><span class="line">   movl <span class="variable">$0</span>x12345,<span class="variable">%eip</span> *</span><br><span class="line"></span><br><span class="line">ret</span><br><span class="line">   popl <span class="variable">%eip</span> *</span><br><span class="line"></span><br><span class="line">enter</span><br><span class="line">   pushl <span class="variable">%ebp</span></span><br><span class="line">   movl <span class="variable">%esp</span>,<span class="variable">%ebp</span></span><br><span class="line"></span><br><span class="line">leave </span><br><span class="line">   movl<span class="variable">%ebp</span>,<span class="variable">%esp</span></span><br><span class="line">   popl <span class="variable">%ebp</span></span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Linux/">Linux</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Linux/">Linux</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/11/linux-kernel-1-disassembling-a-simple-c-program/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/11/linux-kernel-1-disassembling-a-simple-c-program/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/09/php-5-basic-knowledge/" title="php学习笔记5-基础知识：数组" itemprop="url">php学习笔记5-基础知识：数组</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-09T13:11:48.000Z" itemprop="datePublished"> 发表于 2015-05-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="数组">数组</h2><p>1 数组就是在内存里有一块连续的内存空间（堆空间），里面可以保持多个数据，数据没有数据类型的限制。</p>
<p>2 php数组与其他语言的数组区别？<br>a) php数组没有长度限制，其他语言如c必须先指定数组长度。<br>b) php数组没有数据类型限制，其他语言如c必须事先声明数组要存储的数组<br>c) 数组的下标可以是数组也可以是字符串</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义数组</span></span><br><span class="line"><span class="comment">// 显示定义数组array</span></span><br><span class="line"><span class="variable">$arr1</span> = <span class="keyword">array</span>(<span class="string">'路飞'</span>,<span class="string">'男'</span>,<span class="number">200</span>,<span class="number">2000</span>,<span class="number">1223</span>);</span><br><span class="line">var_dump(<span class="variable">$arr1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐士定义数组</span></span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="string">'桔梗'</span>;</span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="string">'女'</span>;</span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="number">18</span>;</span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="number">165</span>;</span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="number">90</span>;</span><br><span class="line">var_dump(<span class="variable">$arr2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//访问数组</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr2</span>[<span class="number">1</span>]; <span class="comment">// 女，数组下标默认从0开始</span></span><br></pre></td></tr></table></figure>
<h2 id="数组分类">数组分类</h2><p>根据数组的下标的不同进行分类<br>索引数组：当前数组的下标（键名）全是数字（整型）<br>关联数组：当前数组的下标全是字符串（使用最多）<br>混合数组：数组的下标既有数字又有字符串</p>
<h3 id="索引数组">索引数组</h3><p>定义方式：系统自动分配下标<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//显示</span></span><br><span class="line"><span class="variable">$arr1</span> = <span class="keyword">array</span>(<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>);</span><br><span class="line"><span class="comment">//$arr1 = array(0 =&gt; 'a',1 =&gt; 'b',2 =&gt; 'c'); </span></span><br><span class="line">var_dump(<span class="variable">$arr1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//隐式</span></span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="string">'a'</span>;		<span class="comment">//$arr2[0] = 'a';</span></span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="string">'b'</span>;		<span class="comment">//$arr2[1] = 'b';</span></span><br><span class="line"><span class="variable">$arr2</span>[] = <span class="string">'c'</span>;		<span class="comment">//$arr2[2] = 'c';</span></span><br><span class="line">var_dump(<span class="variable">$arr2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//手动分配下标</span></span><br><span class="line"><span class="comment">//显示</span></span><br><span class="line"><span class="variable">$arr3</span> = <span class="keyword">array</span>( <span class="number">3</span> =&gt; <span class="string">'a'</span>,<span class="number">2</span> =&gt; <span class="string">'b'</span>,<span class="number">1</span> =&gt; <span class="string">'c'</span>);</span><br><span class="line">var_dump(<span class="variable">$arr3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//隐式</span></span><br><span class="line"><span class="variable">$arr4</span>[<span class="number">5</span>] = <span class="string">'a'</span>;</span><br><span class="line"><span class="variable">$arr4</span>[<span class="number">3</span>] = <span class="string">'b'</span>;</span><br><span class="line"><span class="variable">$arr4</span>[<span class="number">1</span>] = <span class="string">'c'</span>;</span><br><span class="line">var_dump(<span class="variable">$arr4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示</span></span><br><span class="line"><span class="variable">$arr5</span> = <span class="keyword">array</span>(<span class="string">'a'</span>,<span class="number">5</span> =&gt; <span class="string">'b'</span>,<span class="string">'c'</span>);</span><br><span class="line">var_dump(<span class="variable">$arr5</span>);</span><br></pre></td></tr></table></figure></p>
<p>系统分配索引方式</p>
<ol>
<li>系统是0开始分配下标，依次递增1</li>
<li>用户可以手动分配下标（下标不能重复：重复的效果就是覆盖）</li>
<li>如果用户在某一处指定了下标，那么后续元素自动分配的下标从前面的最大值（索引）开始</li>
</ol>
<h3 id="关联数组">关联数组</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关联数组</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</span><br><span class="line"><span class="comment">//显示创建</span></span><br><span class="line"><span class="variable">$arr1</span> = <span class="keyword">array</span>(<span class="string">'a'</span> =&gt; <span class="string">'a'</span>, <span class="string">'b'</span> =&gt; <span class="string">'b'</span>,<span class="string">'c'</span> =&gt; <span class="string">'c'</span>);</span><br><span class="line">var_dump(<span class="variable">$arr1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//隐式创建</span></span><br><span class="line"><span class="variable">$arr2</span>[<span class="string">'a'</span>] = <span class="string">'apple'</span>;</span><br><span class="line"><span class="variable">$arr2</span>[<span class="string">'b'</span>] = <span class="string">'banana'</span>;</span><br><span class="line"><span class="variable">$arr2</span>[<span class="string">'c'</span>] = <span class="string">'cake'</span>;</span><br><span class="line"><span class="variable">$arr2</span>[<span class="string">'d'</span>] = <span class="string">'duck'</span>;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$arr2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//访问关联数组</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr2</span>[<span class="string">'a'</span>];			<span class="comment">//apple</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr2</span>[<span class="string">'d'</span>];			<span class="comment">//duck</span></span><br></pre></td></tr></table></figure>
<p>关联数组</p>
<ol>
<li>下标必须使用引号包含</li>
<li>下标不允许重复，重复会覆盖</li>
</ol>
<h2 id="数组遍历">数组遍历</h2><p>将数组里面的所有元素都取出来。</p>
<h3 id="for循环遍历索引数组">for循环遍历索引数组</h3><p>count()：对数组长度进行计算，返回数组元素的个数（长度）<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组遍历</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">'邹荣华'</span>,<span class="string">'王默'</span>,<span class="string">'李伟豪'</span>,<span class="string">'张日晖'</span>,<span class="string">'陶丹凤'</span>,<span class="string">'周娃女'</span>,<span class="string">'邓桂敏'</span>);</span><br><span class="line"><span class="comment">//				0		1		2		3			4		5		6</span></span><br><span class="line"><span class="comment">//索引数组：下标连续</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获得数组长度</span></span><br><span class="line"><span class="variable">$length</span> = count(<span class="variable">$arr</span>);</span><br><span class="line"><span class="comment">//echo $length;					//7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//for循环遍历数组</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$length</span>;<span class="variable">$i</span>++)&#123;</span><br><span class="line">	<span class="comment">//输出当前数组元素</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="variable">$i</span>],<span class="string">"\t"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>要求：</p>
<ol>
<li>数组必须是索引数组</li>
<li>所以必须是连续的索引</li>
<li>索引必须从0开始</li>
</ol>
<h3 id="foreach遍历">foreach遍历</h3><p>如果数组是一个关联数组，那么就完全不能使用for循环来进行遍历。PHP提供了一个foreach来实现对数组元素的遍历</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组遍历</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">'邹荣华'</span>,<span class="string">'王默'</span>,<span class="string">'李伟豪'</span>,<span class="string">'张日晖'</span>,<span class="string">'陶丹凤'</span>,<span class="string">'周娃女'</span>,<span class="string">'邓桂敏'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//foreach遍历数组</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'key = '</span> . <span class="variable">$key</span> . <span class="string">' value = '</span> . <span class="variable">$value</span> . <span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个关联数组</span></span><br><span class="line"><span class="variable">$array</span>[<span class="string">'name'</span>] = <span class="string">'张三丰'</span>;</span><br><span class="line"><span class="variable">$array</span>[<span class="string">'age'</span>]  = <span class="number">103</span>;</span><br><span class="line"><span class="variable">$array</span>[<span class="string">'jineng'</span>] = <span class="string">'太极'</span>;</span><br><span class="line"><span class="variable">$array</span>[<span class="string">'department'</span>] = <span class="string">'武当'</span>;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$array</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//foreach遍历</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$array</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'key = '</span> . <span class="variable">$key</span> . <span class="string">' value = '</span> . <span class="variable">$value</span> . <span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数each()遍历数组">函数each()遍历数组</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">//定义数组</span><br><span class="line"><span class="variable">$arr</span>[<span class="string">'name'</span>] = <span class="string">'张无忌'</span>;</span><br><span class="line"><span class="variable">$arr</span>[<span class="string">'age'</span>] = <span class="string">'20'</span>;</span><br><span class="line"><span class="variable">$arr</span>[<span class="string">'power'</span>] = <span class="string">'乾坤大挪移'</span>;</span><br><span class="line"><span class="variable">$arr</span>[<span class="string">'company'</span>] = <span class="string">'明教'</span>;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//var</span>_dump(<span class="variable">$arr</span>);</span><br><span class="line"></span><br><span class="line"><span class="regexp">//each</span></span><br><span class="line">//var_dump(<span class="keyword">each</span>(<span class="variable">$arr</span>));		<span class="regexp">//name</span></span><br><span class="line">//var_dump(<span class="keyword">each</span>(<span class="variable">$arr</span>));		<span class="regexp">//age</span></span><br><span class="line">//var_dump(<span class="keyword">each</span>(<span class="variable">$arr</span>));		<span class="regexp">//power</span></span><br><span class="line">//var_dump(<span class="keyword">each</span>(<span class="variable">$arr</span>));		<span class="regexp">//company</span></span><br><span class="line">//var_dump(<span class="keyword">each</span>(<span class="variable">$arr</span>));		<span class="regexp">//false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//<span class="keyword">foreach</span>进行遍历</span><br><span class="line">//<span class="keyword">foreach</span>(<span class="variable">$arr</span> as <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line"><span class="regexp">//</span>	echo <span class="variable">$key</span>. <span class="string">':'</span>.<span class="variable">$value</span>.<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"><span class="regexp">//</span>&#125;</span><br><span class="line">//<span class="keyword">foreach</span>指针遍历完了之后数组指针指向数组末端</span><br><span class="line"></span><br><span class="line">//var_dump(<span class="keyword">each</span>(<span class="variable">$arr</span>));		<span class="regexp">//false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//<span class="keyword">each</span>配合循环<span class="keyword">while</span>遍历数组</span><br><span class="line"><span class="keyword">while</span>(<span class="variable">$each</span> = <span class="keyword">each</span>(<span class="variable">$arr</span>))&#123;</span><br><span class="line">	<span class="regexp">//while</span>内部条件顺序</span><br><span class="line">	//<span class="number">1</span>.先计算表达式结果</span><br><span class="line">	//<span class="number">1.1</span>先计算右边<span class="keyword">each</span>(<span class="variable">$arr</span>)，得到数组或者FALSE</span><br><span class="line">	//<span class="number">1.2</span>进行赋值，将结果赋值给<span class="variable">$each</span>变量</span><br><span class="line">	//<span class="number">2</span>.判断条件：对<span class="variable">$each</span>进行自动转换，如果是数组变成true，如果是FALSE就不需要转变</span><br><span class="line"></span><br><span class="line">	//如果<span class="keyword">each</span>得到数组元素，就为真，进入循环体</span><br><span class="line">	//如果<span class="keyword">each</span>得不到元素，返回FALSE，就不再进入循环体</span><br><span class="line"></span><br><span class="line">	//输出元素信息</span><br><span class="line">	echo <span class="string">'key = '</span>,<span class="variable">$each</span>[<span class="number">0</span>] ,<span class="string">' value = '</span>,<span class="variable">$each</span>[<span class="string">'value'</span>],<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="list使用">list使用</h2><p>list是一个语法结构，将得到的数组里的元素，必须是以0开始的索引元素，对应的赋值给list所指定的变量里。<br>因为each返回的结果里有两个索引元素0和1，所以一般使用list与each进行配对使用<br>list+each+while循环遍历数组<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//定义数组</span><br><span class="line"><span class="variable">$arr</span>[<span class="string">'name'</span>] = <span class="string">'张无忌'</span>;</span><br><span class="line"><span class="variable">$arr</span>[<span class="string">'age'</span>] = <span class="string">'20'</span>;</span><br><span class="line"><span class="variable">$arr</span>[<span class="string">'power'</span>] = <span class="string">'乾坤大挪移'</span>;</span><br><span class="line"><span class="variable">$arr</span>[<span class="string">'company'</span>] = <span class="string">'明教'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//<span class="keyword">list</span>(<span class="variable">$first</span>,<span class="variable">$second</span>) = each(<span class="variable">$arr</span>);</span><br><span class="line">//each(<span class="variable">$arr</span>)</span><br><span class="line">//<span class="keyword">array</span>(<span class="number">0</span> =&gt; <span class="string">'name'</span>,<span class="string">'key'</span> =&gt; <span class="string">'name'</span>,<span class="number">1</span> =&gt; <span class="string">'张无忌'</span>,<span class="string">'value'</span> =&gt; <span class="string">'张无忌'</span>);</span><br><span class="line">//echo <span class="variable">$first</span>,<span class="variable">$second</span>;</span><br><span class="line"></span><br><span class="line">//<span class="keyword">list</span>(<span class="variable">$third</span>,<span class="variable">$fourth</span>) = <span class="keyword">array</span>(<span class="number">1</span> =&gt; <span class="string">'third'</span>,<span class="string">'fourth'</span> =&gt; <span class="string">'fourth'</span>);</span><br><span class="line"><span class="keyword">list</span>(<span class="variable">$third</span>,<span class="variable">$fourth</span>) = FALSE;</span><br><span class="line">//<span class="keyword">list</span>结构允许数组是一个布尔值FALSE，从而不会去数组里取元素赋值给对应的变量</span><br><span class="line"></span><br><span class="line">//<span class="keyword">list</span>+each+<span class="keyword">while</span>遍历数组</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">list</span>(<span class="variable">$first</span>,<span class="variable">$second</span>) = each(<span class="variable">$arr</span>))&#123;</span><br><span class="line">	//判断each得到的结果</span><br><span class="line">	echo <span class="variable">$first</span>,<span class="variable">$second</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>list搭配each的好处：能够直接将数组的元素取出来，且赋值给变量，而在后续的程序中可以直接使用变量来操作。</p>
<h2 id="二维数组">二维数组</h2><p>数组的元素的值是一个数组数据类型。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二维数组</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">	<span class="string">'person1'</span> =&gt; <span class="keyword">array</span>(<span class="string">'name'</span> =&gt; <span class="string">'乔峰'</span>,<span class="string">'age'</span> =&gt; <span class="number">36</span>,<span class="string">'power'</span> =&gt; <span class="string">'降龙十八掌'</span>),</span><br><span class="line">	<span class="string">'person2'</span> =&gt; <span class="keyword">array</span>(<span class="string">'name'</span> =&gt; <span class="string">'段誉'</span>,<span class="string">'age'</span> =&gt; <span class="number">18</span>,<span class="string">'power'</span> =&gt; <span class="string">'凌波微步'</span>),</span><br><span class="line">	<span class="string">'person3'</span> =&gt; <span class="keyword">array</span>(<span class="string">'name'</span> =&gt; <span class="string">'虚竹'</span>,<span class="string">'age'</span> =&gt; <span class="number">23</span>,<span class="string">'power'</span> =&gt; <span class="string">'北冥神功'</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//var_dump($arr);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//访问乔峰的年龄</span></span><br><span class="line"><span class="comment">//echo $arr['person1']['age'];			//36</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//访问Person1</span></span><br><span class="line"><span class="comment">//echo $arr['person1'];					//错误，不能直接echo数组</span></span><br><span class="line"><span class="comment">//var_dump($arr['person1']);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//print_r打印数组</span></span><br><span class="line"><span class="comment">//print_r($arr['person1']);				//打印数组结构和内容，不管数据类型以及元素个数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//二维数组遍历</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)&#123;</span><br><span class="line">	<span class="comment">//将二维数组遍历成一维数组，然后直接访问一维数组里的数据（元素）</span></span><br><span class="line">	<span class="comment">//输入个人信息</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="string">"$key :姓名是"</span> . <span class="variable">$value</span>[<span class="string">'name'</span>] . <span class="string">' 年龄是'</span> . <span class="variable">$value</span>[<span class="string">'age'</span>] . <span class="string">' 技能是'</span> . <span class="variable">$value</span>[<span class="string">'power'</span>] . <span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组的增删改查</span></span><br><span class="line"><span class="comment">//一维数组</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>();				<span class="comment">//新增</span></span><br><span class="line"><span class="variable">$arr</span>[] = ‘泰山’;			<span class="comment">//新增元素</span></span><br><span class="line"><span class="variable">$arr</span>[<span class="number">0</span>] = ‘衡山’;			<span class="comment">//修改元素</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="number">0</span>];				<span class="comment">//查看元素</span></span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$arr</span>[<span class="number">0</span>]);				<span class="comment">//删除元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//二维数组</span></span><br><span class="line"><span class="comment">//定义一个数组</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//新增数组元素</span></span><br><span class="line"><span class="variable">$arr</span>[] = <span class="keyword">array</span>(<span class="string">'a'</span>,<span class="string">'b'</span>);</span><br><span class="line"><span class="variable">$arr</span>[] = <span class="keyword">array</span>(<span class="string">'c'</span>,<span class="string">'d'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//查看数组</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="number">0</span>][<span class="number">1</span>];				<span class="comment">//b</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="number">1</span>][<span class="number">0</span>];				<span class="comment">//c</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改数组</span></span><br><span class="line"><span class="comment">//修改二维数组d=&gt;e</span></span><br><span class="line"><span class="variable">$arr</span>[<span class="number">1</span>][<span class="number">1</span>] = <span class="string">'e'</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$arr</span>[<span class="number">1</span>][<span class="number">1</span>];				<span class="comment">//e</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改一维数组0 =&gt; 'hello world';</span></span><br><span class="line"><span class="variable">$arr</span>[<span class="number">0</span>] = <span class="string">'hello world'</span>;</span><br><span class="line"><span class="comment">//var_dump($arr);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//删除数组</span></span><br><span class="line"><span class="comment">//删除二维数组</span></span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$arr</span>[<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line"><span class="comment">//删除一维数组</span></span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$arr</span>[<span class="number">0</span>]);</span><br><span class="line">var_dump(<span class="variable">$arr</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="数组相关函数">数组相关函数</h2><ul>
<li>key：获取当前数组当前指针所指向元素的下标</li>
<li>current：获取当前数组指针所指向的元素的值</li>
<li>reset：重置数组的指针，让数组指针指向第一个元素，如果成功返回第一个元素的值，失败返回FALSE<br>注意：如果数组第一个元素被删除，那么指针重置之后，是第二个元素（从第一个有效元素开始）</li>
<li>next：返回数组当前指针所指向的下一位的元素的值，并指针下移一位<br>注意：如果当前指针已经在数组元素的最后一个元素，那么next返回FALSE，指针依然下移一位，移除了数组</li>
<li>prev：返回当前指针所在位置的前一个元素的值，并且将指针向前移动一位<br>注意：如果当前指针已经在数组元素的第一个元素，那么使用Prev将会将数组的指针移除数组，返回FALSE<br>如果指针一旦移除数组，那么都不能通过prev或者next将指针拉回来。</li>
<li>end ：获取数组元素最后一个元素的值，指针也会指向最后一个元素<br>注意：end函数与Reset函数有异曲同工之妙，也能把移除数组的指针给重置回来</li>
<li>array_keys：获取数组的所有下标，返回一个索引数组，数组元素的值都是目标数组的下标</li>
<li>array_values：获取数组所有的值，返回一个索引数组</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义函数</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">	<span class="string">'name'</span> =&gt; <span class="string">'杨过'</span>,</span><br><span class="line">	<span class="string">'age'</span>  =&gt; <span class="number">23</span>,</span><br><span class="line">	<span class="string">'power'</span>=&gt; <span class="string">'黯然销魂掌'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">//key函数</span></span><br><span class="line">var_dump(key(<span class="variable">$arr</span>));			<span class="comment">//name</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//current函数</span></span><br><span class="line">var_dump(current(<span class="variable">$arr</span>));		<span class="comment">//杨过</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//next函数</span></span><br><span class="line">var_dump(next(<span class="variable">$arr</span>));			<span class="comment">//23</span></span><br><span class="line">var_dump(key(<span class="variable">$arr</span>));			<span class="comment">//age</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//prev函数</span></span><br><span class="line">var_dump(prev(<span class="variable">$arr</span>));			<span class="comment">//杨过</span></span><br><span class="line">var_dump(key(<span class="variable">$arr</span>));			<span class="comment">//name</span></span><br><span class="line"></span><br><span class="line">var_dump(prev(<span class="variable">$arr</span>));			<span class="comment">//false</span></span><br><span class="line">var_dump(key(<span class="variable">$arr</span>));			<span class="comment">//NULL</span></span><br><span class="line"></span><br><span class="line">var_dump(next(<span class="variable">$arr</span>));			<span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//unset($arr['name']);</span></span><br><span class="line"><span class="comment">//var_dump(key($arr));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Reset函数</span></span><br><span class="line"><span class="comment">//var_dump(reset($arr));			//杨过</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//end函数</span></span><br><span class="line">var_dump(end(<span class="variable">$arr</span>));	</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用Reset，key，current，next对数组进行遍历</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(</span><br><span class="line">	<span class="string">'name'</span> =&gt; <span class="string">'杨过'</span>,</span><br><span class="line">	<span class="string">'age'</span>  =&gt; <span class="number">23</span>,</span><br><span class="line">	<span class="string">'power'</span>=&gt; <span class="string">'黯然销魂掌'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="variable">$value</span> = current(<span class="variable">$arr</span>))&#123;</span><br><span class="line">	<span class="comment">//如果$value有值，那么结果就是TRUE</span></span><br><span class="line">	<span class="comment">//获取键名</span></span><br><span class="line">	<span class="variable">$key</span> = key(<span class="variable">$arr</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//输出</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="string">'key 为'</span>,<span class="variable">$key</span>,<span class="string">' value '</span>,<span class="variable">$value</span>,<span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//改变数组的指针：下移</span></span><br><span class="line">	next(<span class="variable">$arr</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果后续还需要使用函数来访问数组，那么需要重置数组指针，foreach不需要，因为foreach会自己重置数组指针</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//array_keys函数</span></span><br><span class="line">var_dump(array_keys(<span class="variable">$arr</span>));	</span><br><span class="line"></span><br><span class="line"><span class="comment">//二维数组</span></span><br><span class="line"><span class="variable">$arr2</span> = <span class="keyword">array</span>(</span><br><span class="line">	<span class="string">'person1'</span> =&gt; <span class="keyword">array</span>(<span class="string">'赵敏'</span>,<span class="string">'18'</span>),</span><br><span class="line">	<span class="string">'person2'</span> =&gt; <span class="keyword">array</span>(<span class="string">'青翼蝠王'</span>,<span class="number">56</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">var_dump(array_keys(<span class="variable">$arr2</span>));</span><br><span class="line">var_dump(array_values(<span class="variable">$arr2</span>));</span><br></pre></td></tr></table></figure>
<p>以下四个函数:</p>
<ol>
<li>都是对原数组进行操作。</li>
<li>都会重置数组里面的索引。</li>
</ol>
<ul>
<li>array_push：从数组的尾端加入一个元素（压栈）</li>
<li>array_pop：从数组的尾端弹出一个元素（出栈）</li>
<li>array_shift：从数组头部将数组元素移出</li>
<li>array_unshift：从数组的头部插入数据</li>
<li>shuffle：将原来的数组里的元素打乱<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//空数组：栈</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组模拟栈</span></span><br><span class="line"><span class="comment">//压栈</span></span><br><span class="line">array_push(<span class="variable">$arr</span>,<span class="string">'one'</span>);</span><br><span class="line">array_push(<span class="variable">$arr</span>,<span class="string">'two'</span>);</span><br><span class="line">array_push(<span class="variable">$arr</span>,<span class="string">'three'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//var_dump($arr);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//出栈</span></span><br><span class="line">var_dump(array_pop(<span class="variable">$arr</span>));			<span class="comment">//two</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//出队，将元素从数组的头部弹出</span></span><br><span class="line">var_dump(array_shift(<span class="variable">$arr</span>));			<span class="comment">//one</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//以下内容与模拟队列数据结构无关</span></span><br><span class="line"><span class="comment">//从数组头部插入数据</span></span><br><span class="line">array_unshift(<span class="variable">$arr</span>,<span class="string">'four'</span>);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$arr</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>数组与字符串之间的转换</p>
<ul>
<li>explode：将字符串按照指定的分隔符分解成一系列小的字符串，都成为数组的一个元素</li>
<li>implode：将一个数组里的所有的元素按照某个分隔符进行拼接，变成一个字符串<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义数组</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">'黑猫警长'</span>,<span class="string">'黑色'</span>,<span class="string">'流氓'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//将一个数组拼接成一个字符串implode</span></span><br><span class="line"><span class="variable">$str</span> = implode(<span class="string">'|'</span>,<span class="variable">$arr</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$str</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//将一个有结构的字符串转换成一个数组：explode</span></span><br><span class="line"><span class="variable">$ex_arr</span> = explode(<span class="string">'|'</span>,<span class="variable">$str</span>);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$ex_arr</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>CAPTCHA：验证码，制作验证码随机字符串</p>
<ul>
<li>range：按照ASCII码能够指定范围，自动生成数组元素的函数</li>
<li>array_rand：从数组中随机取出指定长度的个数的元素下标</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//range，生成指定范围的数组</span></span><br><span class="line"><span class="variable">$arr1</span> = range(<span class="number">1</span>,<span class="number">9</span>);				<span class="comment">//生成一个1到9 的索引数组</span></span><br><span class="line"><span class="comment">//print_r($arr);</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$arr2</span> = range(<span class="string">'a'</span>,<span class="string">'z'</span>);			<span class="comment">//生成一个a到z的索引数组</span></span><br><span class="line"><span class="variable">$arr3</span> = range(<span class="string">'A'</span>,<span class="string">'Z'</span>);			<span class="comment">//生成一个A到Z的索引数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//var_dump($arr1 + $arr2);					//26个元素</span></span><br><span class="line"><span class="comment">//var_dump(array_merge($arr1,$arr2));		//35个元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//合并生成的所有数组</span></span><br><span class="line"><span class="variable">$arr</span> = array_merge(<span class="variable">$arr1</span>,<span class="variable">$arr2</span>,<span class="variable">$arr3</span>);		<span class="comment">//61个元素</span></span><br><span class="line"><span class="comment">//$arr = array_merge(range(1,9),range('a','z'),range('A','Z'));</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//随机取出指定长度的字符串</span></span><br><span class="line"><span class="comment">//var_dump(array_rand($arr,4));</span></span><br><span class="line"><span class="comment">//得到4个随机下标</span></span><br><span class="line"><span class="variable">$arr_key</span> = array_rand(<span class="variable">$arr</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//打乱数组下标元素</span></span><br><span class="line">shuffle(<span class="variable">$arr_key</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//取得下标对应的数组的值</span></span><br><span class="line"><span class="variable">$captcha</span> = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr_key</span> <span class="keyword">as</span> <span class="variable">$value</span>)&#123;</span><br><span class="line">	<span class="variable">$captcha</span> .= <span class="variable">$arr</span>[<span class="variable">$value</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$captcha</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过字符串来随机生成验证码</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">"123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//随机获取对应的字符</span></span><br><span class="line"><span class="variable">$captcha</span> = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>;<span class="variable">$i</span> &lt; <span class="number">4</span>;<span class="variable">$i</span>++)&#123;</span><br><span class="line">	<span class="comment">//获取1到61之间的随机数</span></span><br><span class="line">	<span class="variable">$num</span> = mt_rand(<span class="number">1</span>,<span class="number">61</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//$captcha .= substr($str,$num,1);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//字符串获取某个字符，可以使用类似数组下标形式访问$str[0] == 1</span></span><br><span class="line">	<span class="variable">$captcha</span> .= <span class="variable">$str</span>[<span class="variable">$num</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出验证码</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$captcha</span>;</span><br></pre></td></tr></table></figure>
<h2 id="数组合并：+和array_merge()">数组合并：+和array_merge()</h2><ul>
<li>+：保存第一个数组的所有元素，如果后面的数组的元素与前面数组的元素的下标相同，那么就忽略，如果不同则加到第一个数组里，最终返回一个数组</li>
<li>array_merge()：先保留第一个数组的所有元素，如果后面数组的元素与前面数组的元素关联下标相同则用后面数组的元素覆盖前面的；如果是索引下标，直接添加到第一个数组后面，重置索引。</li>
</ul>
<h2 id="数组的比较">数组的比较</h2><p>数组的比较主要是比较数组长度，数组元素的值<br>==和===<br>==：要求数组长度一致，数组元素的值相等，下标也要相等<br>===：数组长度一致，值和类型都完全一致，出现的顺序必须也相同<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$arr1</span> = <span class="keyword">array</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="variable">$arr2</span> = <span class="keyword">array</span>(<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line"><span class="variable">$arr3</span> = <span class="keyword">array</span>(<span class="number">2</span> =&gt;<span class="number">3</span>,<span class="number">1</span> =&gt; <span class="number">2</span>, <span class="number">0</span> =&gt; <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//==比较</span></span><br><span class="line">var_dump(<span class="variable">$arr1</span> == <span class="variable">$arr2</span>);				<span class="comment">//false，下标对应的元素的值不等</span></span><br><span class="line">var_dump(<span class="variable">$arr1</span> == <span class="variable">$arr3</span>);				<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//===比较</span></span><br><span class="line">var_dump(<span class="variable">$arr1</span> === <span class="variable">$arr3</span>);				<span class="comment">//false</span></span><br></pre></td></tr></table></figure></p>
<h2 id="排序算法">排序算法</h2><p>冒泡算法，快速排序，选择排序和插入排序。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//冒泡算法</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//因为排序需要每次将一个元素与数组的其他元素进行比较，所以需要两层循环来控制</span></span><br><span class="line"><span class="comment">//外层循环控制冒泡次数</span></span><br><span class="line"><span class="comment">//内存循环比较每次的大小，得到每次的最大值（泡）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>,<span class="variable">$length</span> = count(<span class="variable">$arr</span>);<span class="variable">$i</span> &lt; <span class="variable">$length</span>;<span class="variable">$i</span>++)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//内存循环</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="variable">$j</span> = <span class="number">0</span>;<span class="variable">$j</span> &lt; (<span class="variable">$length</span> - <span class="variable">$i</span> - <span class="number">1</span>);<span class="variable">$j</span>++)&#123;</span><br><span class="line">		<span class="comment">//拿着j变量所对应的数组元素，与后面的元素进行比较</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="variable">$arr</span>[<span class="variable">$j</span>] &gt; <span class="variable">$arr</span>[<span class="variable">$j</span> + <span class="number">1</span>])&#123;</span><br><span class="line">			<span class="comment">//交换位置</span></span><br><span class="line">			<span class="variable">$temp</span>		= <span class="variable">$arr</span>[<span class="variable">$j</span>];</span><br><span class="line">			<span class="variable">$arr</span>[<span class="variable">$j</span>]	= <span class="variable">$arr</span>[<span class="variable">$j</span>+<span class="number">1</span>];</span><br><span class="line">			<span class="variable">$arr</span>[<span class="variable">$j</span>+<span class="number">1</span>]	= <span class="variable">$temp</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$arr</span>);</span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/PHP/">PHP</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PHP/">PHP</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/09/php-5-basic-knowledge/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/09/php-5-basic-knowledge/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/09/php-4-basic-knowledge/" title="php学习笔记4-基础知识：数据类型转换、文件包含、终止脚本执行" itemprop="url">php学习笔记4-基础知识：数据类型转换、文件包含、终止脚本执行</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-09T12:51:07.000Z" itemprop="datePublished"> 发表于 2015-05-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="数据类型转换">数据类型转换</h2><p>指的是将数据（变量）的值转换成目标数据类型。<br>PHP中有两种数据类型转换方式：自动转换，强制转换</p>
<p>自动转换：系统根据操作所需要的类型将变量的值进行对应类型的转换<br>自动转换都是系统本身所做的事情，不需要用户去干预。</p>
<p>强制转换：我们根据具体的需求，将变量的值事先转换成所需的数据类型</p>
<p>查看数据类型的方式</p>
<ol>
<li>var_dump把变量的类型及长度还有数据值都输出</li>
<li>通过函数gettype函数，获得数据的类型，返回一个字符串</li>
</ol>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字符串转整型</span></span><br><span class="line"><span class="variable">$s1</span> <span class="subst">=</span> <span class="string">'1str'</span>;							<span class="comment">//1</span></span><br><span class="line"><span class="variable">$s2</span> <span class="subst">=</span> <span class="string">'s2tr'</span>;							<span class="comment">//0</span></span><br><span class="line"><span class="variable">$s3</span> <span class="subst">=</span> <span class="string">'1.str'</span>;							<span class="comment">//1</span></span><br><span class="line"><span class="variable">$s4</span> <span class="subst">=</span> <span class="string">'1.2.str'</span>;						<span class="comment">//1</span></span><br><span class="line"><span class="variable">$s5</span> <span class="subst">=</span> <span class="string">'1.2.3.str'</span>;						<span class="comment">//1</span></span><br><span class="line"><span class="variable">$s6</span> <span class="subst">=</span> <span class="string">'.2.3.str'</span>;						<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">var_dump((<span class="built_in">integer</span>)<span class="variable">$s1</span>);</span><br><span class="line">var_dump((<span class="built_in">integer</span>)<span class="variable">$s2</span>);</span><br><span class="line">var_dump((<span class="built_in">integer</span>)<span class="variable">$s3</span>);</span><br><span class="line">var_dump((<span class="built_in">integer</span>)<span class="variable">$s4</span>);</span><br><span class="line">var_dump((<span class="built_in">integer</span>)<span class="variable">$s5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//自动转换</span></span><br><span class="line"><span class="variable">$res</span> <span class="subst">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$res</span> <span class="subst">=</span> <span class="variable">$s1</span> <span class="subst">+</span> <span class="variable">$s2</span> <span class="subst">+</span> <span class="variable">$s3</span> <span class="subst">+</span> <span class="variable">$s4</span> <span class="subst">+</span> <span class="variable">$s5</span> <span class="subst">+</span> <span class="variable">$s6</span>;		<span class="comment">//4.6</span></span><br><span class="line">var_dump(<span class="variable">$res</span>);</span><br><span class="line"></span><br><span class="line">var_dump(<span class="variable">$s1</span> <span class="subst">+</span> <span class="variable">$s2</span>); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h2 id="判断数据类型">判断数据类型</h2><p>PHP提供了一些列函数来判断数据的类型。函数都是以is_开头，后面跟数据类型。<br>如果是目标类型则返回TRUE，否则返回FALSE<br>is_bool<br>is_float<br>is_integer<br>is_object<br>is_array<br>is_string<br>is_resource<br>is_scalar：判断一个变量的值是否是标量类型<br>is_null<br>is_numeric：检测变量是否为数字或数字字符串</p>
<h2 id="文件包含">文件包含</h2><p>文件包含：include，include_once，require，require_once，将一个文件的内容包含进另外一个文件。<br>include和require：使用一次包含一次文件<br>include_once和require_once：不管在一个脚本中包含另外一个脚本多次，都只加载一次</p>
<h2 id="文件的包含路径">文件的包含路径</h2><p>文件路径有两种：绝对路径和相对路径<br>绝对路径：从磁盘根目录到文件所在的目录<br>相对路径：文件相对当前文件所在的位置，都一个参照物（一般就是文件）</p>
<p>相对路径表示方式<br>    ./：表示当前目录<br>    ../：上级目录<br>    /：网站根目录</p>
<p>如果每次包含使用绝对路径，那么即便是出现文件嵌套包含（a包含b，b包含c）也不会出现问题，但是如果使用相对路径进行嵌套包含，就会出现路径的错误。</p>
<h2 id="终止脚本执行">终止脚本执行</h2><p>终止脚本执行，指的是通过一条语句告诉PHP引擎，此语句之后的其他语句不需要执行。<br>PHP提供了三种方式来终止脚本执行：return，die，exit<br>return：执行到该处退出，如果是在函数中，表示退出函数，如果是在脚本中，表示脚本停止执行</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/PHP/">PHP</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PHP/">PHP</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/09/php-4-basic-knowledge/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/09/php-4-basic-knowledge/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/05/09/php-3-system-func/" title="php学习笔记3-系统函数" itemprop="url">php学习笔记3-系统函数</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="wzg" target="_blank" itemprop="author">wzg</a>
		
  <p class="article-time">
    <time datetime="2015-05-09T11:11:20.000Z" itemprop="datePublished"> 发表于 2015-05-09</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="字符串函数">字符串函数</h2><h3 id="strlen：获取字符串长度。">strlen：获取字符串长度。</h3><p>字符：一个完整的符号，英文字母，中文等。<br>字节：由8位组成<br>一个字符最小占用一个字节：ASCII码，英文字母通常占用一个字符。<br>中文gbk或者gb2312编码里，占用两个字节。<br>中文utf-8最少占用3个字节，有可能是4个。</p>
<h3 id="substr：截取字符串">substr：截取字符串</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$str</span> = <span class="string">'Hello World'</span>;</span><br><span class="line"><span class="variable">$str1</span> = <span class="string">'中国'</span>;</span><br><span class="line"><span class="regexp">//</span>字符串的起始位置从<span class="number">0</span>开始。第一个字符位置是<span class="number">0</span>.</span><br><span class="line">var_dump(substr(<span class="variable">$str</span>, <span class="number">1</span>,<span class="number">3</span>));   <span class="regexp">//ell</span> </span><br><span class="line">var_dump(substr(<span class="variable">$str1</span>, <span class="number">3</span>));  <span class="regexp">//</span>国</span><br></pre></td></tr></table></figure>
<h3 id="strtolower：将字符串变成小写">strtolower：将字符串变成小写</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">strtolower</span><span class="list">(<span class="string">"HELLO"</span>)</span>)</span><span class="comment">; //hello</span></span><br></pre></td></tr></table></figure>
<h3 id="strtoupper：将字符串变成大写">strtoupper：将字符串变成大写</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">strtoupper</span><span class="list">(<span class="string">"Hello"</span>)</span>)</span><span class="comment">; //HELLO</span></span><br></pre></td></tr></table></figure>
<h3 id="ucfirst：将字符串首字母大写">ucfirst：将字符串首字母大写</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">ucfirst</span><span class="list">(<span class="string">"hello"</span>)</span>)</span><span class="comment">;  //Hello</span></span><br></pre></td></tr></table></figure>
<h3 id="strrev：_字符反转">strrev： 字符反转</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">strrev</span><span class="list">(<span class="quoted">'hello</span>')</span>)</span> <span class="comment">; //olleh</span></span><br></pre></td></tr></table></figure>
<h3 id="strpos:_获取字符串中某个字符首次出现的位置">strpos: 获取字符串中某个字符首次出现的位置</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">strpos</span><span class="list">(<span class="quoted">'hello</span> world', <span class="quoted">'l</span>')</span>)</span><span class="comment">; //2</span></span><br></pre></td></tr></table></figure>
<h3 id="strrpos:_获取字符串中某个字符最后一次出现的位置">strrpos: 获取字符串中某个字符最后一次出现的位置</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">strrpos</span><span class="list">(<span class="quoted">'hello</span> world', <span class="quoted">'l</span>')</span>)</span><span class="comment">; //9</span></span><br></pre></td></tr></table></figure>
<h3 id="strchr:_是strstr函数别名，查找某个字符在字符串中首次出现的位置，并返回该到字符串最后的整个字符串。">strchr: 是strstr函数别名，查找某个字符在字符串中首次出现的位置，并返回该到字符串最后的整个字符串。</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">strstr</span><span class="list">(<span class="quoted">'hello</span> world', <span class="quoted">'l</span>')</span>)</span><span class="comment">; //llo world</span></span><br></pre></td></tr></table></figure>
<h3 id="strrchr:_获取字符串中某个字符最后一次出现的位置，并返回该到字符串最后的整个字符串。">strrchr: 获取字符串中某个字符最后一次出现的位置，并返回该到字符串最后的整个字符串。</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var_dump(strrchr(<span class="string">'hello world'</span>, <span class="string">'l'</span>)); <span class="comment">//ld</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">'http://www.baidu.com/index.php'</span>;</span><br><span class="line"><span class="keyword">echo</span> substr(<span class="variable">$str</span>, strrpos(<span class="variable">$str</span>,<span class="string">'.'</span>));   <span class="comment">//.php</span></span><br><span class="line"><span class="keyword">echo</span> strrchr(<span class="variable">$str</span>, <span class="string">'.'</span>);                <span class="comment">//.php</span></span><br></pre></td></tr></table></figure>
<h3 id="trim:去除一个字符串两边的（最外边）的空格（或者其他字符）">trim:去除一个字符串两边的（最外边）的空格（或者其他字符）</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">trim</span><span class="list">(<span class="quoted">'hello</span> world',<span class="quoted">'d</span>')</span>)</span><span class="comment">;   //hello worl</span></span><br><span class="line">var_dump<span class="list">(<span class="keyword">trim</span><span class="list">(<span class="quoted">'hello</span> world',<span class="quoted">'h</span>')</span>)</span><span class="comment">;   //ello world</span></span><br></pre></td></tr></table></figure>
<h2 id="时间函数">时间函数</h2><p>PHP中时间通常用整型存储</p>
<h3 id="time：得到当前时间的时间戳，整型">time：得到当前时间的时间戳，整型</h3><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">echo <span class="title">time</span><span class="params">()</span></span>; <span class="comment">//1431173888 1970年到当前多少秒</span></span><br></pre></td></tr></table></figure>
<h3 id="date:_将指定的时间戳，按照指定的字符串格式进行输出，输出的格式化有固定的参数">date: 将指定的时间戳，按照指定的字符串格式进行输出，输出的格式化有固定的参数</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">date</span><span class="list">(<span class="quoted">'Y-m-d</span> H<span class="keyword">:i</span><span class="keyword">:s</span>')</span>)</span><span class="comment">; //"2015-05-09 20:23:46"</span></span><br><span class="line">var_dump<span class="list">(<span class="keyword">date</span><span class="list">(<span class="quoted">'Y</span>年m月d日')</span>)</span><span class="comment">; //"2015年05月09日"</span></span><br></pre></td></tr></table></figure>
<h3 id="strtotime:_将一个字符串格式时间（美国可以识别的英文字符串）转化成时间戳">strtotime: 将一个字符串格式时间（美国可以识别的英文字符串）转化成时间戳</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">strtotime</span><span class="list">('<span class="number">2015</span><span class="number">-05</span><span class="number">-09</span>')</span>)</span><span class="comment">; //int(1431100800)</span></span><br></pre></td></tr></table></figure>
<h3 id="microtime:_微秒，返回一个微秒字符串，或者返回一个带两个值（秒，微秒）的数组">microtime: 微秒，返回一个微秒字符串，或者返回一个带两个值（秒，微秒）的数组</h3><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">microtime</span><span class="list">()</span>)</span><span class="comment">; //string(21) "0.28718000 1431175080"</span></span><br><span class="line">var_dump<span class="list">(<span class="keyword">microtime</span><span class="list">(<span class="keyword">true</span>)</span>)</span><span class="comment">; //float(1431175080.2872)</span></span><br></pre></td></tr></table></figure>
<h2 id="数学相关函数">数学相关函数</h2><p>abs：获取数值的绝对值<br>floor：向下取整<br>ceil：向上取整<br>round：四舍五入<br>rand：随机取得指定范围或者0到整数最大值之间的数<br>mt_rand: 随机取得指定范围或者0到整型最大值之间的数，比rand效率高<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var_dump<span class="list">(<span class="keyword">mt_rand</span><span class="list">(<span class="number">0</span>,PHP_INT_MAX)</span>)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/PHP/">PHP</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/PHP/">PHP</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/05/09/php-3-system-func/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/05/09/php-3-system-func/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/PHP/" title="PHP">PHP<sup>12</sup></a></li>
		  
		
		  
			<li><a href="/categories/个人博客/" title="个人博客">个人博客<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/工具使用/" title="工具使用">工具使用<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/计算机科学/" title="计算机科学">计算机科学<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/PHP/" title="PHP">PHP<sup>12</sup></a></li>
			
		
			
				<li><a href="/tags/Linux/" title="Linux">Linux<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/解释型语言/" title="解释型语言">解释型语言<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/编译型语言/" title="编译型语言">编译型语言<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/github-pages/" title="github pages">github pages<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/个人博客/" title="个人博客">个人博客<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/hexo/" title="hexo">hexo<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/工具使用/" title="工具使用">工具使用<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Wang ZhiGang in China. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2015 
		
		<a href="/about" target="_blank" title="wzg">wzg</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"wzg"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 


<script type="text/javascript">

var disqus_shortname = 'fuhongxue';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
